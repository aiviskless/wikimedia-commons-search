(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{117:function(e,t,i){},170:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i.n(n),c=i(13),r=i.n(c),l=(i(117),i(225)),s=i(17),o=i(211),u=i(223),d=i(227),b=i(173),m=i(21),j=i(100),p=i(213),h=i(216),g=i(215),f=i(217),O=i(85),x=(i(119),i(86)),v=i.n(x),w=1500,S=["video/webm","video/mpeg","audio/wav","audio/x-flac","audio/mpeg","audio/midi","audio/webm","application/ogg"],C=["jpg","jpeg","jpe","jif","jfif","png","gif","webp","tiff","psd","raw","svg","pdf"],k=["webm","mpg","mpeg","mpe","mpv","ogv","mp4","m4p","m4v","avi","wmv","mov","qt","flv"],N=["m4a","flac","mp3","wav","wma","aac","ogg","midi"],E=function(e){return e.split("?width")[0]},L=function(e){var t=e.split("/");return E(t[t.length-1])},y=i(5),I=function(e){return e.length>150?"".concat(e.substr(0,50),"..."):e},M=Object(o.a)({root:{height:"fit-content",margin:m.isMobile?8:16,"& .MuiCardContent-root":{padding:8},"& .MuiCardActions-root":{padding:4}},title:{maxWidth:"fit-content",wordBreak:"break-all",fontSize:m.isMobile?12:14},media:{"& img":{objectFit:"cover !important"},"& img:hover":{cursor:"zoom-in !important"}},desc:{maxWidth:"fit-content",fontSize:m.isMobile?10:12}}),A=function(e){var t,i=e.data,n=i.thumb,a=i.fileLabel,c=i.file,r=i.encoding,l=i.fileOrig,s=i.itemLabel,o=e.onClick,u=void 0===o?function(){}:o,d=M();return Object(y.jsxs)(p.a,{className:d.root,children:[Object(y.jsx)("div",{className:d.media,children:S.includes(r.value)?Object(y.jsx)(v.a,{controls:!0,url:l.value,height:m.isMobile?94:169,width:m.isMobile?125:225}):Object(y.jsx)(O.LazyLoadImage,{onClick:u,alt:c.value,effect:"blur",src:n.value,height:m.isMobile?94:169,width:m.isMobile?125:225})}),Object(y.jsxs)(g.a,{children:[Object(y.jsx)(b.a,{className:d.title,gutterBottom:!0,children:(t=L(l.value),t.length>50?"".concat(t.substr(0,50),"..."):t)}),(null===a||void 0===a?void 0:a["xml:lang"])?Object(y.jsx)(b.a,{color:"textSecondary",className:d.desc,children:I(a.value)}):(null===s||void 0===s?void 0:s.value)&&Object(y.jsx)(b.a,{color:"textSecondary",className:d.desc,children:I(s.value)})]}),Object(y.jsx)(h.a,{children:Object(y.jsx)(f.a,{size:"small",color:"primary",href:c.value,target:"_blank",children:"Learn More"})})]})},T=i(51),P=i(69),W=i(91),R=i.n(W),z=i(226),U=i(230),q=i(92),F=i(93),B=function(){function e(t){Object(q.a)(this,e),this.endpoint=t}return Object(F.a)(e,[{key:"query",value:function(e){var t="".concat(this.endpoint,"?query=").concat(encodeURIComponent(e));return fetch(t,{headers:{Accept:"application/sparql-results+json"}}).then((function(e){return e.json()}))}}]),e}(),D=function(e){var t=e.onClick,i=e.option;return Object(y.jsxs)(d.a,{display:"flex",flexDirection:"column",onClick:t,children:[Object(y.jsx)(b.a,{children:i.label}),Object(y.jsx)(b.a,{variant:"caption",children:i.description})]})},H=i(94),G=i.n(H),V=i(220),_=i(228),J=i(222),K=i(231),Q=i(218),X=i(232),Y=i(219),Z=Object(o.a)({root:{width:250},input:{width:50}}),$=function(e){var t=e.mediaLimit,i=e.setMediaLimit,n=Z();return Object(y.jsxs)("div",{className:n.root,children:[Object(y.jsx)(b.a,{id:"input-slider",gutterBottom:!0,children:"Media limit"}),Object(y.jsxs)(Q.a,{container:!0,spacing:2,alignItems:"center",children:[Object(y.jsx)(Q.a,{item:!0,xs:!0,children:Object(y.jsx)(X.a,{value:"number"===typeof t?t:0,onChange:function(e,t){return!(t>w)&&i(t)},"aria-labelledby":"input-slider",color:"secondary",min:10,max:w,step:10})}),Object(y.jsx)(Q.a,{item:!0,children:Object(y.jsx)(Y.a,{className:n.input,value:t,margin:"dense",onChange:function(e){return!(Number(e.target.value)>w)&&i(""===e.target.value?"":Number(e.target.value))},inputProps:{step:10,min:10,max:w,type:"number","aria-labelledby":"input-slider"}})})]})]})},ee=Object(o.a)({popoverContent:{padding:"8px 16px","& .MuiFormControlLabel-labelPlacementStart":{margin:0}},sliderWrapper:{marginTop:16}}),te=function(e){var t=e.setIncludeSubclassSearch,i=e.includeSubclassSearch,a=e.setMediaLimit,c=e.mediaLimit,r=Object(n.useState)(null),l=Object(s.a)(r,2),o=l[0],u=l[1],d=Boolean(o),b=d?"simple-popover":void 0,m=ee();return Object(y.jsxs)("div",{children:[Object(y.jsx)(V.a,{size:"small","aria-describedby":b,onClick:function(e){u(e.currentTarget)},children:Object(y.jsx)(G.a,{})}),Object(y.jsx)(_.a,{id:b,open:d,anchorEl:o,onClose:function(){u(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(y.jsxs)("div",{className:m.popoverContent,children:[Object(y.jsx)(J.a,{value:"start",checked:i,onChange:function(e){t(e.target.checked)},control:Object(y.jsx)(K.a,{size:"small"}),label:"Include subclass search",labelPlacement:"start"}),Object(y.jsx)("div",{className:m.sliderWrapper,children:Object(y.jsx)($,{setMediaLimit:a,mediaLimit:c})})]})})]})},ie=R()({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),ne=Object(o.a)({root:{maxWidth:500,width:"100%",display:"flex",alignItems:"center"},autocomplete:{width:"100%"},searchSettingsWrapper:{marginRight:8}}),ae=function(e){var t=e.setNoResults,i=e.setEntityMediaResults,a=e.setResultsLoading,c=Object(n.useState)(!1),r=Object(s.a)(c,2),l=r[0],o=r[1],d=Object(n.useState)(null),b=Object(s.a)(d,2),j=b[0],p=b[1],h=Object(n.useState)(""),g=Object(s.a)(h,2),f=g[0],O=g[1],x=Object(n.useState)([]),v=Object(s.a)(x,2),w=v[0],S=v[1],C=Object(n.useState)(!0),k=Object(s.a)(C,2),N=k[0],E=k[1],L=Object(n.useState)(1e3),I=Object(s.a)(L,2),M=I[0],A=I[1],W=Object(n.useRef)(null),R=ne();return Object(n.useEffect)((function(){if(!j)return!1;i([]),a(!0);var e=[],n="\n      SELECT ?file ?thumb ?fileOrig ?fileLabel ?encoding WHERE {\n        ?file wdt:P180 wd:".concat(j.id,' .\n        ?file schema:contentUrl ?url .\n        ?file schema:encodingFormat ?encoding .\n        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }\n        bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)), "?width=').concat(m.isMobile?100:200,'")) AS ?thumb)\n        bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\n      } limit ').concat(M,"\n    "),c=new B("https://wcqs-beta.wmflabs.org/sparql");return c.query(n).then((function(r){return e=e.concat(r.results.bindings),t(!1),i(Object(P.a)(e)),N?(e.length>0&&a(!1),n="\n        SELECT DISTINCT ?item ?itemLabel ?image ?file ?thumb ?fileOrig ?fileLabel ?encoding\n        WITH \n        { SELECT ?item ?itemLabel WHERE\n          { SERVICE <https://query.wikidata.org/sparql> \n            { ?item wdt:P31/wdt:P279* wd:".concat(j.id,' .\n              SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". ?item rdfs:label ?itemLabel .}\n            }\n          }\n        } AS %Wikidataitems\n  \n        WHERE {\n          INCLUDE %Wikidataitems .\n          ?file wdt:P180 ?item.\n          ?file schema:contentUrl ?url .\n          ?file schema:encodingFormat ?encoding .\n          SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }\n          bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)), "?width=').concat(m.isMobile?100:200,'")) AS ?thumb)\n          bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\n        } limit ').concat(M,"\n      "),c.query(n).then((function(n){e=e.concat(n.results.bindings),i(Object(P.a)(e)),0===e.length&&t(!0),a(!1)})),!0):(0===e.length&&t(!0),a(!1),!0)})),!0}),[N,j]),Object(n.useEffect)((function(){if(""!==f)return W.current&&clearTimeout(W.current),W.current=setTimeout((function(){o(!0);var e=ie.searchEntities(f);fetch(e).then((function(e){return e.json()})).then((function(e){S(e.search),o(!1)}))}),500),!0;t(!1)}),[f,t]),Object(y.jsxs)("div",{className:R.root,children:[Object(y.jsx)("div",{className:R.searchSettingsWrapper,children:Object(y.jsx)(te,{setIncludeSubclassSearch:E,includeSubclassSearch:N,setMediaLimit:A,mediaLimit:M})}),Object(y.jsx)(U.a,{clearOnBlur:!1,autoHighlight:!0,options:w,renderOption:function(e){return Object(y.jsx)(D,{option:e})},getOptionSelected:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.label},loading:l,filterOptions:function(e){return e},value:j,size:"small",onChange:function(e,t){p(t)},onInputChange:function(e,t){O(t)},className:R.autocomplete,renderInput:function(e){return Object(y.jsx)(z.a,Object(T.a)(Object(T.a)({},e),{},{label:"Search Commons...",variant:"outlined",InputProps:Object(T.a)(Object(T.a)({},e.InputProps),{},{endAdornment:Object(y.jsxs)(y.Fragment,{children:[l?Object(y.jsx)(u.a,{color:"inherit",size:20}):null,w.length>0?e.InputProps.endAdornment:null]})})}))}})]})},ce=i(229),re=i(224),le=i(99),se=i.n(le),oe=i(98),ue=i.n(oe),de=i(97),be=i.n(de),me=i(96),je=i.n(me),pe=Object(o.a)({root:{minHeight:36},tab:{padding:0,minHeight:32,minWidth:85,fontSize:12,textTransform:"capitalize","& .MuiTab-wrapper":{flexDirection:"row","& .MuiSvgIcon-root":{margin:"0 4px 0 0"}}},icon:{fontSize:20}}),he=function(e){var t=e.setTab,i=e.tab,n=pe(),a=[{label:"All",icon:Object(y.jsx)(je.a,{className:n.icon})},{label:"Images",icon:Object(y.jsx)(be.a,{className:n.icon})},{label:"Video",icon:Object(y.jsx)(ue.a,{className:n.icon})},{label:"Audio",icon:Object(y.jsx)(se.a,{className:n.icon})}];return Object(y.jsx)(ce.a,{value:i,indicatorColor:"primary",textColor:"primary",onChange:function(e,i){t(i)},className:n.root,children:a.map((function(e){var t=e.label,i=e.icon;return Object(y.jsx)(re.a,{className:n.tab,label:t,icon:i},t)}))})},ge=function(e){var t=e.split(".");return t[t.length-1]},fe=Object(o.a)({root:{padding:m.isMobile?"20px 10px":"25px 50px",display:"flex",flexDirection:"column",alignItems:"center"},inputWrapper:{marginBottom:8,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},loadingWrapper:{position:"absolute",top:"50%"},count:{marginTop:12},wrapper:{marginTop:12,display:"flex",flexDirection:"column",alignItems:"center"}}),Oe=function(){var e=fe(),t=Object(n.useState)([]),i=Object(s.a)(t,2),a=i[0],c=i[1],r=Object(n.useState)(!1),l=Object(s.a)(r,2),o=l[0],m=l[1],p=Object(n.useState)(!1),h=Object(s.a)(p,2),g=h[0],f=h[1],O=Object(n.useState)(!1),x=Object(s.a)(O,2),v=x[0],w=x[1],S=Object(n.useState)(0),E=Object(s.a)(S,2),I=E[0],M=E[1],T=function(){var e=function(e,t){return e.filter((function(e){return t.includes(ge(L(e.fileOrig.value)))||t.includes(ge(L(e.fileOrig.value.toLowerCase())))}))};switch(I){case 1:return e(a,C);case 2:return e(a,k);case 3:return e(a,N);default:return a}}();return console.log(a,"entityMediaResults"),console.log(T),Object(y.jsxs)("div",{className:e.root,children:[Object(y.jsxs)("div",{className:e.inputWrapper,children:[Object(y.jsx)(ae,{setNoResults:m,setEntityMediaResults:c,setResultsLoading:w}),a.length>0&&Object(y.jsxs)("div",{className:e.wrapper,children:[Object(y.jsx)(he,{setTab:M,tab:I}),Object(y.jsx)("small",{className:e.count,children:"".concat(T.length," results")})]})]}),v&&Object(y.jsx)("div",{className:e.loadingWrapper,children:Object(y.jsx)(u.a,{})}),T.length>0&&Object(y.jsx)(d.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:n.Children.toArray(T.map((function(e){return Object(y.jsx)(A,{data:e,onClick:function(){return f(e)}})})))}),o&&Object(y.jsx)(b.a,{children:"No results..."}),g&&Object(y.jsx)(j.a,{large:g.fileOrig.value,alt:g.file.value,onClose:function(){f(!1)}})]})},xe=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,234)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;i(e),n(e),a(e),c(e),r(e)}))};r.a.render(Object(y.jsxs)(a.a.StrictMode,{children:[Object(y.jsx)(l.a,{}),Object(y.jsx)(Oe,{})]}),document.getElementById("root")),xe()}},[[170,1,2]]]);
//# sourceMappingURL=main.4bb2b220.chunk.js.map