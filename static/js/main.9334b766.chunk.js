(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{132:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),c=n(15),r=n.n(c),l=(n(132),n(260)),s=n(72),o=n(239),d=n(18),u=n(11),b=n(13),p=n(242),j=n(262),f=n(75),m=n(74),O=n.n(m),h=n(246),g=n(248),x=n(247),v=n(249),E=n(114),L=n(270),C=n(100),S=(n(134),n(101)),I=n.n(S),w=n(108),N=n.n(w),T=1500,A=";",U="no depict values",k=["video/webm","video/mpeg","audio/wav","audio/x-flac","audio/mpeg","audio/midi","audio/webm","application/ogg"],W=["jpg","jpeg","jpe","jif","jfif","png","gif","webp","tiff","psd","raw","svg","pdf"],D=["webm","mpg","mpeg","mpe","mpv","ogv","mp4","m4p","m4v","avi","wmv","mov","qt","flv"],P=["m4a","flac","mp3","wav","wma","aac","ogg","midi"],R=function(e){return e.split("?width")[0]},y=function(e){var t=e.split("/");return R(t[t.length-1])},_=n(59),H=n(86),M=n(83),G=n.n(M),q=n(261),z=n(264),B=n(245),F=n(2),V=function(e){var t=e.onClick,n=e.option;return Object(F.jsxs)(j.a,{display:"flex",flexDirection:"column",onClick:t,children:[Object(F.jsx)(E.a,{children:n.label}),Object(F.jsx)(E.a,{variant:"caption",children:n.description})]})},Y=n(106),Q=n.n(Y),J=n(269),K=n(244),X=n(266),Z=n(240),$=n(268),ee=n(241),te=Object(o.a)({root:{width:250},input:{width:50}}),ne=function(e){var t=e.mediaLimit,n=e.setMediaLimit,i=te();return Object(F.jsxs)("div",{className:i.root,children:[Object(F.jsx)(E.a,{id:"input-slider",gutterBottom:!0,children:"Media limit"}),Object(F.jsxs)(Z.a,{container:!0,spacing:2,alignItems:"center",children:[Object(F.jsx)(Z.a,{item:!0,xs:!0,children:Object(F.jsx)($.a,{value:"number"===typeof t?t:0,onChange:function(e,t){return!(t>T)&&n(t)},"aria-labelledby":"input-slider",color:"secondary",min:10,max:T,step:10})}),Object(F.jsx)(Z.a,{item:!0,children:Object(F.jsx)(ee.a,{className:i.input,value:t,margin:"dense",onChange:function(e){return!(Number(e.target.value)>T)&&n(""===e.target.value?"":Number(e.target.value))},inputProps:{step:10,min:10,max:T,type:"number","aria-labelledby":"input-slider"}})})]})]})},ie=Object(o.a)({popoverContent:{padding:"8px 16px","& .MuiFormControlLabel-labelPlacementStart":{margin:0}},sliderWrapper:{marginTop:16}}),ae=function(e){var t=e.setIncludeSubclassSearch,n=e.includeSubclassSearch,a=e.setMediaLimit,c=e.mediaLimit,r=Object(i.useState)(null),l=Object(b.a)(r,2),s=l[0],o=l[1],d=Boolean(s),u=d?"simple-popover":void 0,j=ie();return Object(F.jsxs)("div",{children:[Object(F.jsx)(p.a,{size:"small","aria-describedby":u,onClick:function(e){o(e.currentTarget)},children:Object(F.jsx)(Q.a,{})}),Object(F.jsx)(J.a,{id:u,open:d,anchorEl:s,onClose:function(){o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(F.jsxs)("div",{className:j.popoverContent,children:[Object(F.jsx)(K.a,{value:"start",checked:n,onChange:function(e){t(e.target.checked)},control:Object(F.jsx)(X.a,{size:"small"}),label:"Include subclass search",labelPlacement:"start"}),Object(F.jsx)("div",{className:j.sliderWrapper,children:Object(F.jsx)(ne,{setMediaLimit:a,mediaLimit:c})})]})})]})},ce=G()({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"}),re=G()({instance:"https://commons.wikimedia.org/",sparqlEndpoint:"https://wcqs-beta.wmflabs.org/sparql"}),le=Object(o.a)({root:{maxWidth:500,width:"100%",display:"flex",alignItems:"center"},autocomplete:{width:"100%"},searchSettingsWrapper:{marginRight:8}}),se=function(e){var t=e.setNoResults,n=void 0===t?function(){}:t,a=e.setEntityMediaResults,c=void 0===a?function(){}:a,r=e.setResultsLoading,l=void 0===r?function(){}:r,s=Object(i.useState)(!1),o=Object(b.a)(s,2),p=o[0],j=o[1],f=Object(i.useState)(null),m=Object(b.a)(f,2),O=m[0],h=m[1],g=Object(i.useState)(""),x=Object(b.a)(g,2),v=x[0],E=x[1],L=Object(i.useState)([]),C=Object(b.a)(L,2),S=C[0],I=C[1],w=Object(i.useState)(!0),N=Object(b.a)(w,2),T=N[0],U=N[1],k=Object(i.useState)(1e3),W=Object(b.a)(k,2),D=W[0],P=W[1],R=Object(u.h)(),y=Object(u.g)(),M=Object(i.useRef)(null),G=le();return Object(i.useEffect)((function(){if(!(null===R||void 0===R?void 0:R.data))return O&&y.push("/search/".concat(O.id).concat(A).concat(O.label)),!1;var e=R.data.split(A),t=e[0],i=e[1];if(!t||!i)return!1;i!==v&&fetch(ce.searchEntities(i)).then((function(e){return e.json()})).then((function(e){I(e.search),h(e.search.find((function(e){return e.id===t})))})),c([]),l(!0);var a,r=[],s="\n      SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding ?creator (GROUP_CONCAT(?depictID; separator = '".concat(A,"') AS ?depictIDs) (GROUP_CONCAT(?depictLabel; separator = '").concat(A,"') AS ?depictLabels)\n      WITH {  \n          SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding ?creator WHERE {\n            ?file wdt:P180 wd:").concat(t,' .\n            ?file schema:contentUrl ?url .\n            ?file schema:encodingFormat ?encoding .\n            \n            OPTIONAL { ?file p:P170/pq:P4174 ?creator . }\n      \n            SERVICE wikibase:label {\n              bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n              ?file rdfs:label ?fileLabel.\n            }\n      \n            bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)), "?width=').concat(d.isMobile?100:200,'")) AS ?thumb)\n            bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\n          } limit ').concat(D,'\n      } as %files\n      \n      WITH {\n        SELECT ?file ?depict WHERE {\n          INCLUDE %files .\n          ?file wdt:P180 ?depict .\n        }\n      } AS %file_depicts\n      \n      WITH {\n        SELECT ?file ?depict WHERE {\n          INCLUDE %file_depicts .\n        }\n      } AS %top_file_depicts\n      \n      WITH {\n        SELECT DISTINCT ?depict WHERE {\n          INCLUDE %file_depicts .\n        }\n      } AS %distinct_depicts\n        \n      WITH {\n        SELECT ?depict ?depictLabel ?depictID WHERE {\n          INCLUDE %distinct_depicts .\n\n          BIND(?depict as ?depictURL) .\n          service wikibase:label {\n            bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en" .\n            ?depictURL rdfs:label ?depictID .\n          }\n\n          service <https://query.wikidata.org/sparql> {\n            service wikibase:label {\n              bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n              ?depict rdfs:label ?depictLabel.\n            }\n          }\n        }\n      } AS %depictLabels\n      \n      WHERE {\n        INCLUDE %files .\n        INCLUDE %top_file_depicts .\n        INCLUDE %depictLabels .\n      } GROUP BY ?file ?fileLabel ?thumb ?fileOrig ?encoding ?creator\n    ');return a=re.sparqlQuery(s),fetch(a).then((function(e){return e.json()})).then((function(e){return r=r.concat(e.results.bindings),n(!1),c(Object(H.a)(r)),T?(r.length>0&&l(!1),s="\n        SELECT DISTINCT ?item ?itemLabel ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator (GROUP_CONCAT(?depictID; separator = '".concat(A,"') AS ?depictIDs) (GROUP_CONCAT(?depictLabel; separator = '").concat(A,"') AS ?depictLabels) WITH { \n          SELECT ?item ?itemLabel WHERE {\n            SERVICE <https://query.wikidata.org/sparql> {\n              ?item wdt:P31/wdt:P279* wd:").concat(t,' .\n              SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". ?item rdfs:label ?itemLabel . }\n            }\n          } limit ').concat(D,'\n        } AS %Wikidataitems\n  \n        WITH {\n          SELECT ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator {\n            INCLUDE %Wikidataitems .\n            ?file wdt:P180 ?item.\n            ?file schema:contentUrl ?url .\n            ?file schema:encodingFormat ?encoding .\n  \n            OPTIONAL {\n              ?file p:P170/pq:P4174 ?creator .\n            }\n  \n            SERVICE wikibase:label {\n              bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n              ?file rdfs:label ?fileLabel.\n            }\n\n            bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)), "?width=').concat(d.isMobile?100:200,'")) AS ?thumb)\n            bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\n          }\n        } AS %files\n\n        WITH {\n          SELECT ?file ?depict WHERE {\n            INCLUDE %files .\n            ?file wdt:P180 ?depict .\n          }\n        } AS %file_depicts\n        \n        WITH {\n          SELECT ?file ?depict WHERE {\n            INCLUDE %file_depicts .\n          }\n        } AS %top_file_depicts\n        \n        WITH {\n          SELECT DISTINCT ?depict WHERE {\n            INCLUDE %file_depicts .\n          }\n        } AS %distinct_depicts\n          \n        WITH {\n          SELECT ?depict ?depictLabel ?depictID WHERE {\n            INCLUDE %distinct_depicts .\n\n            BIND(?depict as ?depictURL) .\n            service wikibase:label {\n              bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en" .\n              ?depictURL rdfs:label ?depictID .\n            }\n\n            service <https://query.wikidata.org/sparql> {\n              service wikibase:label {\n                bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en" .\n                ?depict rdfs:label ?depictLabel .\n              }\n            }\n          }\n        } AS %depictLabels\n\n        WHERE {\n          INCLUDE %files .\n          INCLUDE %top_file_depicts .\n          INCLUDE %depictLabels .\n        } GROUP BY ?item ?itemLabel ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator\n      '),a=re.sparqlQuery(s),fetch(a).then((function(e){return e.json()})).then((function(e){r=r.concat(e.results.bindings),c(Object(H.a)(r)),0===r.length&&n(!0),l(!1)})),!0):(0===r.length&&n(!0),l(!1),!0)})),!0}),[T,R]),Object(i.useEffect)((function(){if(""!==v)return M.current&&clearTimeout(M.current),M.current=setTimeout((function(){j(!0);var e=ce.searchEntities(v);fetch(e).then((function(e){return e.json()})).then((function(e){I(e.search),j(!1)}))}),500),!0;n(!1)}),[v,n]),Object(F.jsxs)("div",{className:G.root,children:[Object(F.jsx)("div",{className:G.searchSettingsWrapper,children:Object(F.jsx)(ae,{setIncludeSubclassSearch:U,includeSubclassSearch:T,setMediaLimit:P,mediaLimit:D})}),Object(F.jsx)(z.a,{clearOnBlur:!1,autoHighlight:!0,options:S,renderOption:function(e){return Object(F.jsx)(V,{option:e})},getOptionSelected:function(e,t){return e.title===t.title},getOptionLabel:function(e){return e.label},loading:p,filterOptions:function(e){return e},value:O,size:"small",onChange:function(e,t){h(t),(null===t||void 0===t?void 0:t.id)&&y.push("/search/".concat(t.id).concat(A).concat(t.label))},onInputChange:function(e,t){E(t)},className:G.autocomplete,renderInput:function(e){return Object(F.jsx)(q.a,Object(_.a)(Object(_.a)({},e),{},{label:"Search Commons...",variant:"outlined",InputProps:Object(_.a)(Object(_.a)({},e.InputProps),{},{endAdornment:Object(F.jsxs)(F.Fragment,{children:[p?Object(F.jsx)(B.a,{color:"inherit",size:20}):null,S.length>0?e.InputProps.endAdornment:null]})})}))}})]})},oe=function(e){return e.length>150?"".concat(e.substr(0,50),"..."):e},de=Object(o.a)((function(e){return{root:{height:"fit-content",margin:d.isMobile?8:16,width:d.isMobile?125:225,"& .MuiCardContent-root":{padding:8},"& .MuiCardActions-root":{padding:4}},title:{wordBreak:"break-all",fontSize:d.isMobile?12:14},media:{"& img":{objectFit:"cover !important"},"& img:hover":{cursor:"zoom-in !important"}},desc:{fontSize:d.isMobile?10:12,marginBottom:4},creatorWrapper:{display:"flex",alignItems:"center","& svg":{display:"flex",alignItems:"center",fontSize:20,color:"gray",transform:"translateY(-2px)",marginRight:4},"& a":{fontSize:12,textDecoration:"none",color:e.palette.text.secondary,"&:hover":{textDecoration:"underline"}}},chipsWrapper:{display:"flex",flexWrap:"wrap",margin:"8px 0","& > div":{margin:2,height:d.isMobile?16:20},"& span":{fontSize:d.isMobile?10:11}}}})),ue=function(e){var t,n=e.data,a=n.thumb,c=n.fileLabel,r=n.file,l=n.encoding,o=n.fileOrig,p=n.itemLabel,j=n.creator,f=n.depictLabels,m=n.depictIDs,O=e.onClick,S=void 0===O?function(){}:O,w=Object(i.useState)(0),T=Object(b.a)(w,2),W=T[0],D=T[1],P=de(),R=Object(u.g)();return Object(i.useEffect)((function(){if(!j)return!1;var e='\n      SELECT (COUNT(?file) as ?count) WHERE {\n        BIND("'.concat(j.value,'" AS ?username) .\n        ?file (p:P170/pq:P4174) ?username;\n      }\n      LIMIT 99\n    ');return fetch(re.sparqlQuery(e)).then((function(e){return e.json()})).then((function(e){var t;(null===(t=e.results.bindings)||void 0===t?void 0:t.length)&&D(e.results.bindings[0].count.value)})),!0}),[j]),Object(F.jsxs)(h.a,{className:P.root,children:[Object(F.jsx)("div",{className:P.media,children:k.includes(l.value)?Object(F.jsx)(I.a,{controls:!0,url:o.value,height:d.isMobile?94:169,width:d.isMobile?125:225}):Object(F.jsx)(C.LazyLoadImage,{onClick:S,alt:r.value,effect:"blur",src:a.value,height:d.isMobile?94:169,width:d.isMobile?125:225})}),Object(F.jsxs)(x.a,{children:[Object(F.jsx)(E.a,{className:P.title,gutterBottom:!0,children:(t=y(o.value),t.length>50?"".concat(t.substr(0,50),"..."):t)}),(null===c||void 0===c?void 0:c["xml:lang"])?Object(F.jsx)(E.a,{color:"textSecondary",className:P.desc,children:oe(c.value)}):(null===p||void 0===p?void 0:p.value)&&Object(F.jsx)(E.a,{color:"textSecondary",className:P.desc,children:oe(p.value)}),(null===f||void 0===f?void 0:f.value)&&Object(F.jsx)("div",{className:P.chipsWrapper,children:i.Children.toArray(f.value.split(A).filter((function(e){return e!==U})).map((function(e,t){return Object(F.jsx)(L.a,{size:"small",label:e,onClick:function(){return function(e,t){R.push("/search/".concat(m.value.split(A)[t]).concat(A).concat(e))}(e,t)}})})))}),j&&Object(F.jsxs)("div",{className:P.creatorWrapper,children:[Object(F.jsx)(N.a,{}),Object(F.jsx)(s.b,{to:"/user/".concat(j.value),children:"".concat(j.value," (").concat(W||"?",")")})]})]}),Object(F.jsx)(g.a,{children:Object(F.jsx)(v.a,{size:"small",color:"primary",href:r.value,target:"_blank",children:"Learn More"})})]})},be=n(263),pe=n(250),je=n(112),fe=n.n(je),me=n(111),Oe=n.n(me),he=n(110),ge=n.n(he),xe=n(109),ve=n.n(xe),Ee=Object(o.a)({root:{minHeight:36},tab:{padding:0,minHeight:32,minWidth:85,fontSize:12,textTransform:"capitalize","& .MuiTab-wrapper":{flexDirection:"row","& .MuiSvgIcon-root":{margin:"0 4px 0 0"}}},icon:{fontSize:20}}),Le=function(e){var t=e.setTab,n=e.tab,i=Ee(),a=[{label:"All",icon:Object(F.jsx)(ve.a,{className:i.icon})},{label:"Images",icon:Object(F.jsx)(ge.a,{className:i.icon})},{label:"Video",icon:Object(F.jsx)(Oe.a,{className:i.icon})},{label:"Audio",icon:Object(F.jsx)(fe.a,{className:i.icon})}];return Object(F.jsx)(be.a,{value:n,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){t(n)},className:i.root,children:a.map((function(e){var t=e.label,n=e.icon;return Object(F.jsx)(pe.a,{className:i.tab,label:t,icon:n},t)}))})},Ce=function(e){var t=e.split(".");return t[t.length-1]},Se=function(){return Object(F.jsx)(E.a,{children:"No results..."})},Ie=Object(o.a)({root:{position:"absolute",top:"50%"}}),we=function(){var e=Ie();return Object(F.jsx)("div",{className:e.root,children:Object(F.jsx)(B.a,{})})},Ne=n(267),Te=n(259),Ae=n(258),Ue=n(257),ke=n(252),We=n(256),De=n(255),Pe=n(251),Re=n(253),ye=n(254),_e=n(190),He=function(e){var t=e.data,n=Object(i.useState)(null),a=Object(b.a)(n,2),c=a[0],r=a[1];return Object(i.useEffect)((function(){var e={},n={};t.forEach((function(t){t.depictLabels.value.split(A).forEach((function(t){e[t]?e[t]+=1:e[t]=1}))})),Object.keys(e).forEach((function(t){e[t]>1&&t!==U&&(n[t]=e[t])})),r(n)}),[t]),c?Object(F.jsx)(Pe.a,{component:_e.a,children:Object(F.jsxs)(ke.a,{"aria-label":"a dense table",children:[Object(F.jsx)(Re.a,{children:Object(F.jsxs)(ye.a,{children:[Object(F.jsx)(De.a,{children:Object(F.jsx)("b",{children:"Depicts label"})}),Object(F.jsx)(De.a,{align:"right",children:Object(F.jsx)("b",{children:"Occurrences"})})]})}),Object(F.jsx)(We.a,{children:Object.entries(c).sort((function(e,t){var n=Object(b.a)(e,2)[1];return Object(b.a)(t,2)[1]-n})).map((function(e){return Object(F.jsxs)(ye.a,{children:[Object(F.jsx)(De.a,{component:"th",scope:"row",children:e[0]}),Object(F.jsx)(De.a,{align:"right",children:e[1]})]})}))})]})}):null},Me=function(e){var t=e.open,n=e.handleClose,i=e.data;return Object(F.jsxs)(Ne.a,{fullWidth:!0,maxWidth:"sm",open:t,onClose:n,fullScreen:d.isMobile,children:[Object(F.jsx)(Ue.a,{id:"max-width-dialog-title",children:"Depicts value statistics"}),Object(F.jsx)(Ae.a,{children:Object(F.jsx)(He,{data:i})}),Object(F.jsx)(Te.a,{children:Object(F.jsx)(v.a,{onClick:n,color:"primary",children:"Close"})})]})},Ge=Object(o.a)({inputWrapper:{marginBottom:8,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},resultCountWrapper:{marginTop:12,display:"flex",alignItems:"center","& button":{transform:"translateY(-2px)",marginLeft:2}},wrapper:{marginTop:12,display:"flex",flexDirection:"column",alignItems:"center"}}),qe=function(){var e=Ge(),t=Object(i.useState)([]),n=Object(b.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!1),l=Object(b.a)(r,2),s=l[0],o=l[1],d=Object(i.useState)(!1),u=Object(b.a)(d,2),m=u[0],h=u[1],g=Object(i.useState)(!1),x=Object(b.a)(g,2),v=x[0],E=x[1],L=Object(i.useState)(0),C=Object(b.a)(L,2),S=C[0],I=C[1],w=Object(i.useState)(!1),N=Object(b.a)(w,2),T=N[0],A=N[1],U=function(){var e=function(e,t){return e.filter((function(e){return t.includes(Ce(y(e.fileOrig.value)))||t.includes(Ce(y(e.fileOrig.value.toLowerCase())))}))};switch(S){case 1:return e(a,W);case 2:return e(a,D);case 3:return e(a,P);default:return a}}();return console.log(a,"entityMediaResults"),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:e.inputWrapper,children:[Object(F.jsx)(se,{setNoResults:o,setEntityMediaResults:c,setResultsLoading:E}),a.length>0&&Object(F.jsxs)("div",{className:e.wrapper,children:[Object(F.jsx)(Le,{setTab:I,tab:S}),Object(F.jsxs)("div",{className:e.resultCountWrapper,children:[Object(F.jsx)("small",{children:"".concat(U.length," results")}),Object(F.jsx)(p.a,{size:"small",onClick:function(){return A(!0)},children:Object(F.jsx)(O.a,{})})]})]})]}),v&&Object(F.jsx)(we,{}),U.length>0&&Object(F.jsx)(j.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:i.Children.toArray(U.map((function(e){return Object(F.jsx)(ue,{data:e,onClick:function(){return h(e)}})})))}),s&&Object(F.jsx)(Se,{}),m&&Object(F.jsx)(f.a,{large:m.fileOrig.value,alt:m.file.value,onClose:function(){h(!1)}}),Object(F.jsx)(Me,{open:T,handleClose:function(){return A(!1)},data:a})]})},ze=Object(o.a)({inputWrapper:{marginBottom:8,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},count:{marginTop:4},wrapper:{marginTop:12,display:"flex",flexDirection:"column",alignItems:"center"},username:{marginTop:12},resultCountWrapper:{marginTop:12,display:"flex",alignItems:"center","& button":{transform:"translateY(-2px)",marginLeft:2}}}),Be=function(){var e=ze(),t=Object(i.useState)([]),n=Object(b.a)(t,2),a=n[0],c=n[1],r=Object(i.useState)(!1),l=Object(b.a)(r,2),s=l[0],o=l[1],m=Object(i.useState)(!1),h=Object(b.a)(m,2),g=h[0],x=h[1],v=Object(i.useState)(!1),L=Object(b.a)(v,2),C=L[0],S=L[1],I=Object(i.useState)(0),w=Object(b.a)(I,2),N=w[0],T=w[1],A=Object(i.useState)(!1),k=Object(b.a)(A,2),R=k[0],_=k[1],H=Object(u.h)();Object(i.useEffect)((function(){if(!(null===H||void 0===H?void 0:H.data))return!1;S(!0),o(!1);var e="\n      SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding (GROUP_CONCAT(?depictID; separator = ';') AS ?depictIDs) (GROUP_CONCAT(?depictLabel; separator = ';') AS ?depictLabels)\n      WITH {\n        SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding WHERE {\n          BIND('".concat(null===H||void 0===H?void 0:H.data,'\' AS ?username) .\n          ?file (p:P170/pq:P4174) ?username.\n          \n          ?file schema:contentUrl ?url .\n          ?file schema:encodingFormat ?encoding .\n\n          SERVICE wikibase:label {\n            bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n            ?file rdfs:label ?fileLabel.\n          }\n    \n          bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)), "?width=').concat(d.isMobile?100:200,'")) AS ?thumb)\n          bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\n        } LIMIT 1000\n      } as %files\n      \n      WITH {\n        SELECT ?file ?depict WHERE {\n          INCLUDE %files .\n          OPTIONAL { ?file wdt:P180 ?depict . }\n          BIND(IF(BOUND(?depict), ?depict, "').concat(U,'") AS ?depict).\n        }\n      } AS %file_depicts\n      \n      WITH {\n        SELECT ?file ?depict WHERE {\n          INCLUDE %file_depicts .\n        }\n      } AS %top_file_depicts\n      \n      WITH {\n        SELECT DISTINCT ?depict WHERE {\n          INCLUDE %file_depicts .\n        }\n      } AS %distinct_depicts\n      \n      WITH {\n        SELECT ?depict ?depictLabel ?depictID WHERE {\n          INCLUDE %distinct_depicts .\n\n          BIND(?depict as ?depictURL) .\n          service wikibase:label {\n            bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en" .\n            ?depictURL rdfs:label ?depictID .\n          }\n\n          service <https://query.wikidata.org/sparql> {\n            service wikibase:label {\n              bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n              ?depict rdfs:label ?depictLabel.\n            }\n          }\n        }\n      } AS %depictLabels\n      \n      WHERE {\n        INCLUDE %files .\n        INCLUDE %top_file_depicts .\n        INCLUDE %depictLabels .\n      } GROUP BY ?file ?fileLabel ?thumb ?fileOrig ?encoding\n    ');return fetch(re.sparqlQuery(e)).then((function(e){return e.json()})).then((function(e){var t;(null===(t=e.results.bindings)||void 0===t?void 0:t.length)?c(e.results.bindings):o(!0),S(!1)})),!0}),[H]);var M=function(){var e=function(e,t){return e.filter((function(e){return t.includes(Ce(y(e.fileOrig.value)))||t.includes(Ce(y(e.fileOrig.value.toLowerCase())))}))};switch(N){case 1:return e(a,W);case 2:return e(a,D);case 3:return e(a,P);default:return a}}();return console.log(a,"entityMediaResults"),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:e.inputWrapper,children:[Object(F.jsx)(se,{}),a.length>0&&Object(F.jsxs)("div",{className:e.wrapper,children:[Object(F.jsx)(Le,{setTab:T,tab:N}),Object(F.jsx)(E.a,{variant:"h6",className:e.username,children:"User:".concat(H.data," uploads")}),Object(F.jsxs)("div",{className:e.resultCountWrapper,children:[Object(F.jsx)("small",{children:"".concat(M.length," results")}),Object(F.jsx)(p.a,{size:"small",onClick:function(){return _(!0)},children:Object(F.jsx)(O.a,{})})]})]})]}),C&&Object(F.jsx)(we,{}),M.length>0&&Object(F.jsx)(j.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:i.Children.toArray(M.map((function(e){return Object(F.jsx)(ue,{data:e,onClick:function(){return x(e)}})})))}),s&&Object(F.jsx)(Se,{}),g&&Object(F.jsx)(f.a,{large:g.fileOrig.value,alt:g.file.value,onClose:function(){x(!1)}}),Object(F.jsx)(Me,{open:R,handleClose:function(){return _(!1)},data:a})]})},Fe=Object(o.a)({root:{padding:d.isMobile?"20px 10px":"25px 50px",display:"flex",flexDirection:"column",alignItems:"center"}}),Ve=function(){var e=Fe();return Object(F.jsx)("div",{className:e.root,children:Object(F.jsxs)(u.d,{children:[Object(F.jsx)(u.b,{exact:!0,path:"/",component:se}),Object(F.jsx)(u.b,{path:"/search/:data",component:qe}),Object(F.jsx)(u.b,{path:"/user/:data",component:Be}),Object(F.jsx)(u.a,{to:"/"})]})})},Ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,273)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))};r.a.render(Object(F.jsxs)(a.a.StrictMode,{children:[Object(F.jsx)(l.a,{}),Object(F.jsx)(s.a,{basename:"/wikimedia-commons-search",children:Object(F.jsx)(Ve,{})})]}),document.getElementById("root")),Ye()}},[[188,1,2]]]);
//# sourceMappingURL=main.9334b766.chunk.js.map