{"version":3,"sources":["consts.js","utils/getFullsizeImage.js","utils/getFilenameFromWDCFilePath.js","components/MediaBox.jsx","components/SearchResultOption.jsx","components/MediaLimitSlider.jsx","components/SearchSettings.jsx","components/Input.jsx","components/MediaTypeTabs.jsx","utils/getFilenameExtension.js","App.jsx","reportWebVitals.js","index.jsx"],"names":["MAX_MEDIA_LIMIT","NOT_IMAGE_ENCODINGS","IMAGE_FILE_EXTS","VIDEO_FILE_EXTS","AUDIO_FILE_EXTS","getFullsizeImage","url","split","getFilenameFromWDCFilePath","splitUrl","length","formatDesc","desc","substr","useStyles","makeStyles","root","height","margin","isMobile","padding","title","maxWidth","wordBreak","fontSize","media","objectFit","cursor","marginBottom","creatorWrapper","display","alignItems","color","transform","marginRight","MediaBox","data","thumb","fileLabel","file","encoding","fileOrig","itemLabel","creator","creatorUploadCount","onClick","classes","Card","className","includes","value","controls","width","alt","effect","src","CardContent","Typography","gutterBottom","variant","CardActions","Button","size","href","target","SearchResultOption","option","Box","flexDirection","label","description","input","MediaLimitSlider","mediaLimit","setMediaLimit","id","Grid","container","spacing","item","xs","Slider","onChange","event","newValue","aria-labelledby","min","max","step","Number","inputProps","type","popoverContent","sliderWrapper","marginTop","SearchSettings","setIncludeSubclassSearch","includeSubclassSearch","useState","anchorEl","setAnchorEl","open","Boolean","undefined","IconButton","aria-describedby","currentTarget","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","FormControlLabel","checked","control","Checkbox","labelPlacement","wd","WBK","instance","sparqlEndpoint","wc","autocomplete","searchSettingsWrapper","Input","setNoResults","setEntityMediaResults","setResultsLoading","loading","setLoading","setValue","inputValue","setInputValue","inputSearchResults","setInputSearchResults","timer","useRef","useEffect","newEntityMediaResults","sparqlQuery","fetch","then","response","json","concat","results","bindings","current","clearTimeout","setTimeout","searchEntities","search","Autocomplete","clearOnBlur","autoHighlight","options","renderOption","getOptionSelected","getOptionLabel","filterOptions","x","onInputChange","newInputValue","renderInput","params","TextField","InputProps","endAdornment","CircularProgress","minHeight","tab","minWidth","textTransform","icon","MediaTypeTabs","setTab","TABS","Tabs","indicatorColor","textColor","map","Tab","getFilenameExtension","filename","inputWrapper","loadingWrapper","position","top","count","wrapper","App","entityMediaResults","noResults","selectedImage","setSelectedImage","filteredResults","filterExts","files","extensions","filter","toLowerCase","filterResults","console","log","flexWrap","justifyContent","Children","toArray","result","large","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.c5b562e5.chunk.js","sourcesContent":["export const TIMEOUT_FOR_SEARCH = 500;\r\nexport const DEFAULT_MEDIA_LIMIT = 1000;\r\nexport const MAX_MEDIA_LIMIT = 1500;\r\nexport const WCQS_ENDPOINT = 'https://wcqs-beta.wmflabs.org/sparql';\r\nexport const WDQS_ENDPOINT = 'https://query.wikidata.org/sparql';\r\nexport const WIKIDATA_URL = 'https://www.wikidata.org';\r\nexport const COMMONS_URL = 'https://commons.wikimedia.org/';\r\n\r\nexport const ALL_TAB = 0;\r\nexport const IMAGES_TAB = 1;\r\nexport const VIDEO_TAB = 2;\r\nexport const AUDIO_TAB = 3;\r\n\r\nexport const NOT_IMAGE_ENCODINGS = [\r\n  'video/webm',\r\n  'video/mpeg',\r\n  'audio/wav',\r\n  'audio/x-flac',\r\n  'audio/mpeg',\r\n  'audio/midi',\r\n  'audio/webm',\r\n  'application/ogg',\r\n];\r\n\r\nexport const IMAGE_FILE_EXTS = [\r\n  'jpg',\r\n  'jpeg',\r\n  'jpe',\r\n  'jif',\r\n  'jfif',\r\n  'png',\r\n  'gif',\r\n  'webp',\r\n  'tiff',\r\n  'psd',\r\n  'raw',\r\n  'svg',\r\n  'pdf',\r\n];\r\n\r\nexport const VIDEO_FILE_EXTS = [\r\n  'webm',\r\n  'mpg',\r\n  'mpeg',\r\n  'mpe',\r\n  'mpv',\r\n  'ogv',\r\n  'mp4',\r\n  'm4p',\r\n  'm4v',\r\n  'avi',\r\n  'wmv',\r\n  'mov',\r\n  'qt',\r\n  'flv',\r\n];\r\n\r\nexport const AUDIO_FILE_EXTS = [\r\n  'm4a',\r\n  'flac',\r\n  'mp3',\r\n  'wav',\r\n  'wma',\r\n  'aac',\r\n  'ogg',\r\n  'midi',\r\n];\r\n","const getFullsizeImage = (url) => url.split('?width')[0];\r\n\r\nexport default getFullsizeImage;\r\n","import getFullsizeImage from './getFullsizeImage';\r\n\r\nconst getFilenameFromWDCFilePath = (url) => {\r\n  const splitUrl = url.split('/');\r\n\r\n  return getFullsizeImage(splitUrl[splitUrl.length - 1]);\r\n};\r\n\r\nexport default getFilenameFromWDCFilePath;\r\n","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport 'react-lazy-load-image-component/src/effects/blur.css';\r\nimport { isMobile } from 'react-device-detect';\r\nimport ReactPlayer from 'react-player';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport { NOT_IMAGE_ENCODINGS } from '../consts';\r\nimport getFilenameFromWDCFilePath from '../utils/getFilenameFromWDCFilePath';\r\n\r\nconst formatTitle = (title) => {\r\n  if (title.length > 50) return `${title.substr(0, 50)}...`;\r\n  return title;\r\n};\r\n\r\nconst formatDesc = (desc) => {\r\n  if (desc.length > 150) return `${desc.substr(0, 50)}...`;\r\n  return desc;\r\n};\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    height: 'fit-content',\r\n    margin: isMobile ? 8 : 16,\r\n\r\n    '& .MuiCardContent-root': {\r\n      padding: 8,\r\n    },\r\n\r\n    '& .MuiCardActions-root': {\r\n      padding: 4,\r\n    },\r\n  },\r\n\r\n  title: {\r\n    maxWidth: 'fit-content',\r\n    wordBreak: 'break-all',\r\n    fontSize: isMobile ? 12 : 14,\r\n  },\r\n\r\n  media: {\r\n    '& img': {\r\n      objectFit: 'cover !important',\r\n    },\r\n\r\n    '& img:hover': {\r\n      cursor: 'zoom-in !important',\r\n    },\r\n  },\r\n\r\n  desc: {\r\n    maxWidth: 'fit-content',\r\n    fontSize: isMobile ? 10 : 12,\r\n    marginBottom: 8,\r\n  },\r\n\r\n  creatorWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n\r\n    '& svg': {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      fontSize: 20,\r\n      color: 'gray',\r\n      transform: 'translateY(-2px)',\r\n      marginRight: 4,\r\n    },\r\n  },\r\n});\r\n\r\nconst MediaBox = ({\r\n  data: {\r\n    thumb, fileLabel, file, encoding, fileOrig, itemLabel, creator, creatorUploadCount,\r\n  },\r\n  onClick = () => {},\r\n}) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <div className={classes.media}>\r\n        {NOT_IMAGE_ENCODINGS.includes(encoding.value) ? (\r\n          <ReactPlayer\r\n            controls\r\n            url={fileOrig.value}\r\n            height={isMobile ? 94 : 169}\r\n            width={isMobile ? 125 : 225}\r\n          />\r\n        ) : (\r\n          <LazyLoadImage\r\n            onClick={onClick}\r\n            alt={file.value}\r\n            effect=\"blur\"\r\n            src={thumb.value}\r\n            height={isMobile ? 94 : 169}\r\n            width={isMobile ? 125 : 225}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <CardContent>\r\n        <Typography className={classes.title} gutterBottom>\r\n          {formatTitle(getFilenameFromWDCFilePath(fileOrig.value))}\r\n        </Typography>\r\n\r\n        {fileLabel?.['xml:lang'] ? (\r\n          <Typography\r\n            color=\"textSecondary\"\r\n            className={classes.desc}\r\n          >\r\n            {formatDesc(fileLabel.value)}\r\n          </Typography>\r\n        )\r\n          // show Wikidata item description if file description unavailable\r\n          : itemLabel?.value && (\r\n            <Typography color=\"textSecondary\" className={classes.desc}>\r\n              {formatDesc(itemLabel.value)}\r\n            </Typography>\r\n          )}\r\n\r\n        {creator && (\r\n          <div className={classes.creatorWrapper}>\r\n            <PersonIcon />\r\n            <Typography color=\"textSecondary\" variant=\"caption\">\r\n              {`${creator.value} (${creatorUploadCount?.value || '?'})`}\r\n            </Typography>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n\r\n      <CardActions>\r\n        <Button\r\n          size=\"small\"\r\n          color=\"primary\"\r\n          href={file.value}\r\n          target=\"_blank\"\r\n        >\r\n          Learn More\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MediaBox;\r\n","import { Box, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst SearchResultOption = ({ onClick, option }) => (\r\n  <Box display=\"flex\" flexDirection=\"column\" onClick={onClick}>\r\n    <Typography>{option.label}</Typography>\r\n    <Typography variant=\"caption\">{option.description}</Typography>\r\n  </Box>\r\n);\r\n\r\nexport default SearchResultOption;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Input from '@material-ui/core/Input';\r\nimport { MAX_MEDIA_LIMIT } from '../consts';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: 250,\r\n  },\r\n  input: {\r\n    width: 50,\r\n  },\r\n});\r\n\r\nconst MediaLimitSlider = ({ mediaLimit, setMediaLimit }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    if (newValue > MAX_MEDIA_LIMIT) return false;\r\n    return setMediaLimit(newValue);\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    if (Number(event.target.value) > MAX_MEDIA_LIMIT) return false;\r\n    return setMediaLimit(event.target.value === '' ? '' : Number(event.target.value));\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography id=\"input-slider\" gutterBottom>\r\n        Media limit\r\n      </Typography>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs>\r\n          <Slider\r\n            value={typeof mediaLimit === 'number' ? mediaLimit : 0}\r\n            onChange={handleSliderChange}\r\n            aria-labelledby=\"input-slider\"\r\n            color=\"secondary\"\r\n            min={10}\r\n            max={MAX_MEDIA_LIMIT}\r\n            step={10}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <Input\r\n            className={classes.input}\r\n            value={mediaLimit}\r\n            margin=\"dense\"\r\n            onChange={handleInputChange}\r\n            inputProps={{\r\n              step: 10,\r\n              min: 10,\r\n              max: MAX_MEDIA_LIMIT,\r\n              type: 'number',\r\n              'aria-labelledby': 'input-slider',\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLimitSlider;\r\n","import React, { useState } from 'react';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport {\r\n  Checkbox, FormControlLabel, IconButton, makeStyles, Popover,\r\n} from '@material-ui/core';\r\nimport MediaLimitSlider from './MediaLimitSlider';\r\n\r\nconst useStyles = makeStyles({\r\n  popoverContent: {\r\n    padding: '8px 16px',\r\n\r\n    '& .MuiFormControlLabel-labelPlacementStart': {\r\n      margin: 0,\r\n    },\r\n  },\r\n\r\n  sliderWrapper: {\r\n    marginTop: 16,\r\n  },\r\n});\r\n\r\nconst SearchSettings = ({\r\n  setIncludeSubclassSearch,\r\n  includeSubclassSearch,\r\n  setMediaLimit,\r\n  mediaLimit,\r\n}) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setIncludeSubclassSearch(event.target.checked);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        size=\"small\"\r\n        aria-describedby={id}\r\n        onClick={handleClick}\r\n      >\r\n        <SettingsIcon />\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'center',\r\n        }}\r\n      >\r\n        <div className={classes.popoverContent}>\r\n          <FormControlLabel\r\n            value=\"start\"\r\n            checked={includeSubclassSearch}\r\n            onChange={handleChange}\r\n            control={<Checkbox size=\"small\" />}\r\n            label=\"Include subclass search\"\r\n            labelPlacement=\"start\"\r\n          />\r\n\r\n          <div className={classes.sliderWrapper}>\r\n            <MediaLimitSlider\r\n              setMediaLimit={setMediaLimit}\r\n              mediaLimit={mediaLimit}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Popover>\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default SearchSettings;\r\n","import React, {\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport WBK from 'wikibase-sdk';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport {\r\n  CircularProgress, makeStyles,\r\n} from '@material-ui/core';\r\nimport { isMobile } from 'react-device-detect';\r\nimport SearchResultOption from './SearchResultOption';\r\nimport {\r\n  COMMONS_URL,\r\n  DEFAULT_MEDIA_LIMIT,\r\n  TIMEOUT_FOR_SEARCH,\r\n  WCQS_ENDPOINT,\r\n  WDQS_ENDPOINT,\r\n  WIKIDATA_URL,\r\n} from '../consts';\r\nimport SearchSettings from './SearchSettings';\r\n\r\nconst wd = WBK({\r\n  instance: WIKIDATA_URL,\r\n  sparqlEndpoint: WDQS_ENDPOINT,\r\n});\r\n\r\nconst wc = WBK({\r\n  instance: COMMONS_URL,\r\n  sparqlEndpoint: WCQS_ENDPOINT,\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 500,\r\n    width: '100%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  autocomplete: {\r\n    width: '100%',\r\n  },\r\n\r\n  searchSettingsWrapper: {\r\n    marginRight: 8,\r\n  },\r\n});\r\n\r\nconst Input = ({ setNoResults, setEntityMediaResults, setResultsLoading }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(null);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [inputSearchResults, setInputSearchResults] = useState([]);\r\n\r\n  // settings\r\n  const [includeSubclassSearch, setIncludeSubclassSearch] = useState(true);\r\n  const [mediaLimit, setMediaLimit] = useState(DEFAULT_MEDIA_LIMIT);\r\n\r\n  const timer = useRef(null);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleOnValueChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  // useEffect for Commons search\r\n  useEffect(() => {\r\n    if (!value) return false;\r\n\r\n    setEntityMediaResults([]);\r\n    setResultsLoading(true);\r\n    let newEntityMediaResults = [];\r\n    let url;\r\n\r\n    // selects all depicts\r\n    // SELECT ?o WHERE {\r\n    //   <https://commons.wikimedia.org/entity/M5848047> wdt:P180 ?o .\r\n    // }\r\n\r\n    // define first query\r\n    let sparqlQuery = `\r\n      SELECT ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator (COUNT(?files) as ?creatorUploadCount) (group_concat(?depictLabel;separator=\"/\") as ?depicts) WHERE {\r\n        ?file wdt:P180 wd:${value.id} .\r\n        ?file schema:contentUrl ?url .\r\n        ?file schema:encodingFormat ?encoding .\r\n        \r\n        OPTIONAL { \r\n          ?file wdt:P180 ?depict .\r\n          ?file p:P170/pq:P4174 ?creator .\r\n          ?files p:P170/pq:P4174 ?creator .\r\n        }\r\n        \r\n        SERVICE wikibase:label {\r\n          bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".\r\n          ?depict rdfs:label ?depictLabel .\r\n        }\r\n        bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)), \"?width=${isMobile ? 100 : 200}\")) AS ?thumb)\r\n        bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\r\n      } group by ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator limit ${mediaLimit}\r\n    `;\r\n\r\n    url = wc.sparqlQuery(sparqlQuery);\r\n\r\n    fetch(url).then((response) => response.json()).then((data) => {\r\n      newEntityMediaResults = newEntityMediaResults.concat(data.results.bindings);\r\n      setNoResults(false);\r\n\r\n      setEntityMediaResults([...newEntityMediaResults]);\r\n\r\n      if (!includeSubclassSearch) {\r\n        if (newEntityMediaResults.length === 0) setNoResults(true);\r\n        setResultsLoading(false);\r\n        return true;\r\n      }\r\n\r\n      if (newEntityMediaResults.length > 0) setResultsLoading(false);\r\n\r\n      // define query that searches for subclasses as well\r\n\r\n      // sparqlQuery = `\r\n      //   SELECT DISTINCT ?item ?itemLabel ?image ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator (COUNT(?files) as ?creatorUploadCount) WITH {\r\n      //     SELECT ?item ?itemLabel WHERE {\r\n      //       SERVICE <https://query.wikidata.org/sparql> {\r\n      //         ?item wdt:P31/wdt:P279* wd:${value.id} .\r\n      //         SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". ?item rdfs:label ?itemLabel . }\r\n      //       }\r\n      //     } limit 500\r\n      //   } AS %Wikidataitems\r\n\r\n      //   WHERE {\r\n      //     INCLUDE %Wikidataitems .\r\n      //     ?file wdt:P180 ?item.\r\n      //     ?file schema:contentUrl ?url .\r\n      //     ?file schema:encodingFormat ?encoding .\r\n\r\n      //     OPTIONAL {\r\n      //       ?file p:P170/pq:P4174 ?creator .\r\n      //       ?files p:P170/pq:P4174 ?creator .\r\n      //     }\r\n\r\n      //     SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n      //     bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)), \"?width=${isMobile ? 100 : 200}\")) AS ?thumb)\r\n      //     bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\r\n      //   } group by ?item ?itemLabel ?image ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator ?creatorUploadCount limit ${mediaLimit}\r\n      // `;\r\n\r\n      sparqlQuery = `\r\n        SELECT DISTINCT ?item ?itemLabel ?image ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator WITH { \r\n          SELECT ?item ?itemLabel WHERE {\r\n            SERVICE <https://query.wikidata.org/sparql> {\r\n              ?item wdt:P31/wdt:P279* wd:${value.id} .\r\n              SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". ?item rdfs:label ?itemLabel . }\r\n            }\r\n          }\r\n        } AS %Wikidataitems\r\n  \r\n        WHERE {\r\n          INCLUDE %Wikidataitems .\r\n          ?file wdt:P180 ?item.\r\n          ?file schema:contentUrl ?url .\r\n          ?file schema:encodingFormat ?encoding .\r\n\r\n          OPTIONAL {\r\n            ?file p:P170/pq:P4174 ?creator .\r\n          }\r\n\r\n          SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }\r\n          bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)), \"?width=${isMobile ? 100 : 200}\")) AS ?thumb)\r\n          bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\r\n        } limit ${mediaLimit}\r\n      `;\r\n\r\n      url = wc.sparqlQuery(sparqlQuery);\r\n      // eslint-disable-next-line no-shadow\r\n      fetch(url).then((response) => response.json()).then((data) => {\r\n        newEntityMediaResults = newEntityMediaResults.concat(data.results.bindings);\r\n        setEntityMediaResults([...newEntityMediaResults]);\r\n        if (newEntityMediaResults.length === 0) setNoResults(true);\r\n        setResultsLoading(false);\r\n      });\r\n\r\n      return true;\r\n    });\r\n\r\n    return true;\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [includeSubclassSearch, value]);\r\n\r\n  // useEffect for input change and Wikidata search\r\n  useEffect(() => {\r\n    if (inputValue === '') {\r\n      setNoResults(false);\r\n      return undefined;\r\n    }\r\n\r\n    if (timer.current) {\r\n      clearTimeout(timer.current);\r\n    }\r\n\r\n    timer.current = setTimeout(() => {\r\n      setLoading(true);\r\n      const url = wd.searchEntities(inputValue);\r\n      fetch(url)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setInputSearchResults(data.search);\r\n          setLoading(false);\r\n        });\r\n    }, TIMEOUT_FOR_SEARCH);\r\n\r\n    return true;\r\n  }, [inputValue, setNoResults]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.searchSettingsWrapper}>\r\n        <SearchSettings\r\n          setIncludeSubclassSearch={setIncludeSubclassSearch}\r\n          includeSubclassSearch={includeSubclassSearch}\r\n          setMediaLimit={setMediaLimit}\r\n          mediaLimit={mediaLimit}\r\n        />\r\n      </div>\r\n\r\n      <Autocomplete\r\n        clearOnBlur={false}\r\n        autoHighlight\r\n        options={inputSearchResults}\r\n        renderOption={(option) => <SearchResultOption option={option} />}\r\n        // eslint-disable-next-line no-shadow\r\n        getOptionSelected={(option, value) => option.title === value.title}\r\n        getOptionLabel={(option) => option.label}\r\n        loading={loading}\r\n        filterOptions={(x) => x}\r\n        value={value}\r\n        size=\"small\"\r\n        onChange={handleOnValueChange}\r\n        onInputChange={(event, newInputValue) => {\r\n          setInputValue(newInputValue);\r\n        }}\r\n        className={classes.autocomplete}\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            label=\"Search Commons...\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <>\r\n                  {loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                  {inputSearchResults.length > 0 ? params.InputProps.endAdornment : null}\r\n                </>\r\n              ),\r\n            }}\r\n          />\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport AudiotrackIcon from '@material-ui/icons/Audiotrack';\r\nimport VideocamOutlinedIcon from '@material-ui/icons/VideocamOutlined';\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minHeight: 36,\r\n  },\r\n\r\n  tab: {\r\n    padding: 0,\r\n    minHeight: 32,\r\n    minWidth: 85,\r\n    fontSize: 12,\r\n    textTransform: 'capitalize',\r\n\r\n    '& .MuiTab-wrapper': {\r\n      flexDirection: 'row',\r\n\r\n      '& .MuiSvgIcon-root': {\r\n        margin: '0 4px 0 0',\r\n      },\r\n    },\r\n  },\r\n\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n});\r\n\r\nconst MediaTypeTabs = ({ setTab, tab }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const TABS = [\r\n    {\r\n      label: 'All',\r\n      icon: <SearchOutlinedIcon className={classes.icon} />,\r\n    },\r\n    {\r\n      label: 'Images',\r\n      icon: <ImageOutlinedIcon className={classes.icon} />,\r\n    },\r\n    {\r\n      label: 'Video',\r\n      icon: <VideocamOutlinedIcon className={classes.icon} />,\r\n    },\r\n    {\r\n      label: 'Audio',\r\n      icon: <AudiotrackIcon className={classes.icon} />,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Tabs\r\n      value={tab}\r\n      indicatorColor=\"primary\"\r\n      textColor=\"primary\"\r\n      onChange={handleChange}\r\n      className={classes.root}\r\n    >\r\n      {TABS.map(({ label, icon }) => (\r\n        <Tab key={label} className={classes.tab} label={label} icon={icon} />\r\n      ))}\r\n    </Tabs>\r\n  );\r\n};\r\n\r\nexport default MediaTypeTabs;\r\n","const getFilenameExtension = (filename) => {\r\n  const splitUrl = filename.split('.');\r\n\r\n  return splitUrl[splitUrl.length - 1];\r\n};\r\n\r\nexport default getFilenameExtension;\r\n","import React, { Children, useState } from 'react';\r\nimport {\r\n  Box, CircularProgress, makeStyles, Typography,\r\n} from '@material-ui/core';\r\nimport { isMobile } from 'react-device-detect';\r\nimport { Lightbox } from 'react-modal-image';\r\nimport MediaBox from './components/MediaBox';\r\nimport Input from './components/Input';\r\nimport MediaTypeTabs from './components/MediaTypeTabs';\r\nimport {\r\n  ALL_TAB, AUDIO_FILE_EXTS, AUDIO_TAB, IMAGES_TAB, IMAGE_FILE_EXTS, VIDEO_FILE_EXTS, VIDEO_TAB,\r\n} from './consts';\r\nimport getFilenameExtension from './utils/getFilenameExtension';\r\nimport getFilenameFromWDCFilePath from './utils/getFilenameFromWDCFilePath';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    padding: isMobile ? '20px 10px' : '25px 50px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  inputWrapper: {\r\n    marginBottom: 8,\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  loadingWrapper: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n  },\r\n\r\n  count: {\r\n    marginTop: 12,\r\n  },\r\n\r\n  wrapper: {\r\n    marginTop: 12,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nconst App = () => {\r\n  const classes = useStyles();\r\n  const [entityMediaResults, setEntityMediaResults] = useState([]);\r\n  const [noResults, setNoResults] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tab, setTab] = useState(ALL_TAB);\r\n\r\n  const closeLightbox = () => {\r\n    setSelectedImage(false);\r\n  };\r\n\r\n  const filterResults = () => {\r\n    const filterExts = (files, extensions) => files.filter((media) => (\r\n      extensions.includes(\r\n        getFilenameExtension(getFilenameFromWDCFilePath(media.fileOrig.value)),\r\n      )\r\n      || extensions.includes(\r\n        getFilenameExtension(getFilenameFromWDCFilePath(media.fileOrig.value.toLowerCase())),\r\n      )\r\n    ));\r\n\r\n    switch (tab) {\r\n      case IMAGES_TAB:\r\n        return filterExts(entityMediaResults, IMAGE_FILE_EXTS);\r\n      case VIDEO_TAB:\r\n        return filterExts(entityMediaResults, VIDEO_FILE_EXTS);\r\n      case AUDIO_TAB:\r\n        return filterExts(entityMediaResults, AUDIO_FILE_EXTS);\r\n      default:\r\n        return entityMediaResults;\r\n    }\r\n  };\r\n\r\n  const filteredResults = filterResults();\r\n\r\n  console.log(entityMediaResults, 'entityMediaResults');\r\n  console.log(filteredResults);\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.inputWrapper}>\r\n        <Input\r\n          setNoResults={setNoResults}\r\n          setEntityMediaResults={setEntityMediaResults}\r\n          setResultsLoading={setLoading}\r\n        />\r\n        {entityMediaResults.length > 0 && (\r\n          <div className={classes.wrapper}>\r\n            <MediaTypeTabs setTab={setTab} tab={tab} />\r\n            <small className={classes.count}>{`${filteredResults.length} results`}</small>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {loading && (\r\n        <div className={classes.loadingWrapper}>\r\n          <CircularProgress />\r\n        </div>\r\n      )}\r\n\r\n      {filteredResults.length > 0 && (\r\n        <Box display=\"flex\" flexWrap=\"wrap\" justifyContent=\"center\">\r\n          {Children.toArray(filteredResults.map((result) => (\r\n            <MediaBox data={result} onClick={() => setSelectedImage(result)} />\r\n          )))}\r\n        </Box>\r\n      )}\r\n\r\n      {noResults && <Typography>No results...</Typography>}\r\n\r\n      {selectedImage && (\r\n        <Lightbox\r\n          large={selectedImage.fileOrig.value}\r\n          alt={selectedImage.file.value}\r\n          onClose={closeLightbox}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <CssBaseline />\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}