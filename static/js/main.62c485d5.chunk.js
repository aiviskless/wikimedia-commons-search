(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{114:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),c=n(11),r=n.n(c),o=(n(80),n(165)),s=n(33),l=n(24),u=(n(81),n(57)),d=n.n(u),j=n(166),b=n(168),h=n(167),f=n(164),p=n(156),O=n(169),g=n(58),m=n(59),x=function(){function t(e){Object(g.a)(this,t),this.endpoint=e}return Object(m.a)(t,[{key:"query",value:function(t){var e="".concat(this.endpoint,"?query=").concat(encodeURIComponent(t));return fetch(e,{headers:{Accept:"application/sparql-results+json"}}).then((function(t){return t.json()}))}}]),t}(),v=n(7),w=function(t){var e=t.onClick,n=t.option;return Object(v.jsxs)(h.a,{display:"flex",flexDirection:"column",onClick:function(){return e(n.id)},children:[Object(v.jsx)(p.a,{children:n.label}),Object(v.jsx)(p.a,{variant:"caption",children:n.description})]})},C=n(159),S=n(161),k=n(160),y=n(162),A=n(158),E=n(66),q=function(t){return t.split("?width")[0]},I=function(t){var e=t.split("/");return q(e[e.length-1])},L=Object(A.a)({root:{width:"fit-content",height:"fit-content",margin:16,"& .MuiCardContent-root":{padding:8},"& .MuiCardActions-root":{padding:4}},title:{maxWidth:"fit-content",wordBreak:"break-all",fontSize:14},media:{textAlign:"center",height:150,"& img":{height:"100%",width:"auto"},"& img:hover":{cursor:"zoom-in !important"},"& div:first-child":{height:"100%"}},desc:{maxWidth:"fit-content",fontSize:12}}),P=function(t){var e,n,i=t.data,a=i.image,c=i.fileLabel,r=i.file,o=L();return Object(v.jsxs)(C.a,{className:o.root,children:[Object(v.jsx)("div",{className:o.media,children:Object(v.jsx)(E.a,{small:a.value,large:q(a.value),alt:r.value})}),Object(v.jsxs)(k.a,{children:[Object(v.jsx)(p.a,{className:o.title,gutterBottom:!0,children:(n=I(a.value),n.length>50?"".concat(n.substr(0,50),"..."):n)}),(null===c||void 0===c?void 0:c["xml:lang"])&&Object(v.jsx)(p.a,{color:"textSecondary",className:o.desc,children:(e=c.value,e.length>150?"".concat(e.substr(0,50),"..."):e)})]}),Object(v.jsx)(S.a,{children:Object(v.jsx)(y.a,{size:"small",color:"primary",href:r.value,target:"_blank",children:"Learn More"})})]})},N=d()({instance:"https://www.wikidata.org",sparqlEndpoint:"https://query.wikidata.org/sparql"});var F=function(){var t=Object(i.useState)(null),e=Object(l.a)(t,2),n=e[0],a=e[1],c=Object(i.useState)(""),r=Object(l.a)(c,2),o=r[0],u=r[1],d=Object(i.useState)([]),g=Object(l.a)(d,2),m=g[0],C=g[1],S=Object(i.useState)([]),k=Object(l.a)(S,2),y=k[0],A=k[1],E=Object(i.useState)(!1),q=Object(l.a)(E,2),I=q[0],L=q[1],F=Object(i.useState)(!1),M=Object(l.a)(F,2),T=M[0],z=M[1],R=Object(i.useState)(1),U=Object(l.a)(R,2),W=U[0],B=U[1],D=Object(i.useRef)(null);console.log(y,"entityMediaResults",m);var G=16*W,J=G-16;return Object(i.useEffect)((function(){if(""!==o)return D.current&&clearTimeout(D.current),D.current=setTimeout((function(){L(!0);var t=N.searchEntities(o);fetch(t).then((function(t){return t.json()})).then((function(t){C(t.search),L(!1)}))}),500),!0}),[o]),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(h.a,{width:500,children:Object(v.jsx)(b.a,{id:"autocomplete",options:m,renderOption:function(t){return Object(v.jsx)(w,{onClick:function(){return function(t){A([]),B(1);var e="\n      SELECT ?file ?image ?fileLabel ?thumb WHERE {\n        ?file wdt:P180 wd:".concat(t,' .\n        ?file schema:contentUrl ?url .\n        SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }\n        bind(iri(concat("http://commons.wikimedia.org/wiki/Special:FilePath/", wikibase:decodeUri(substr(str(?url),53)), "?width=350")) AS ?image)\n      } limit ').concat(100,"\n    ");new x("https://wcqs-beta.wmflabs.org/sparql").query(e).then((function(t){0===t.results.bindings.length?z(!0):(A(t.results.bindings),z(!1))}))}(t.id)},option:t})},getOptionSelected:function(t,e){return t.title===e.title},getOptionLabel:function(t){return t.label},loading:I,filterOptions:function(t){return t},value:n,onChange:function(t,e){a(e)},onInputChange:function(t,e){u(e)},renderInput:function(t){return Object(v.jsx)(j.a,Object(s.a)(Object(s.a)({},t),{},{label:"Search Wikimedia Commons",margin:"normal",variant:"outlined",InputProps:Object(s.a)(Object(s.a)({},t.InputProps),{},{endAdornment:Object(v.jsxs)(v.Fragment,{children:[I?Object(v.jsx)(f.a,{color:"inherit",size:20}):null,t.InputProps.endAdornment]})})}))}})}),y.length>0&&Object(v.jsx)(h.a,{display:"flex",flexWrap:"wrap",justifyContent:"center",children:i.Children.toArray(y.slice(J,G).map((function(t){return Object(v.jsx)(P,{data:t})})))}),T&&Object(v.jsx)(p.a,{children:"No results..."}),y.length>0&&Object(v.jsx)(O.a,{count:Math.ceil(y.length/16),page:W,onChange:function(t,e){B(e)}})]})},M=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,171)).then((function(e){var n=e.getCLS,i=e.getFID,a=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),i(t),a(t),c(t),r(t)}))};r.a.render(Object(v.jsxs)(a.a.StrictMode,{children:[Object(v.jsx)(o.a,{}),Object(v.jsx)(F,{})]}),document.getElementById("root")),M()},80:function(t,e,n){},81:function(t,e,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.62c485d5.chunk.js.map