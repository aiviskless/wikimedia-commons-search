{"version":3,"sources":["consts.js","utils/getFullsizeImage.js","utils/getFilenameFromWDCFilePath.js","components/SearchResultOption.jsx","components/MediaLimitSlider.jsx","components/SearchSettings.jsx","components/Input.jsx","components/MediaBox.jsx","components/MediaTypeTabs.jsx","utils/getFilenameExtension.js","components/NoResults.jsx","components/Loading.jsx","components/DepictsValueTable.jsx","components/AnalyticsDialog.jsx","components/Search.jsx","components/User.jsx","App.jsx","reportWebVitals.js","index.jsx"],"names":["MAX_MEDIA_LIMIT","SEPERATOR","NO_DEPICT_VALUES","NOT_IMAGE_ENCODINGS","IMAGE_FILE_EXTS","VIDEO_FILE_EXTS","AUDIO_FILE_EXTS","getFullsizeImage","url","split","getFilenameFromWDCFilePath","splitUrl","length","SearchResultOption","onClick","option","Box","display","flexDirection","Typography","label","variant","description","useStyles","makeStyles","root","width","input","MediaLimitSlider","mediaLimit","setMediaLimit","classes","className","id","gutterBottom","Grid","container","spacing","alignItems","item","xs","Slider","value","onChange","event","newValue","aria-labelledby","color","min","max","step","margin","Number","target","inputProps","type","popoverContent","padding","sliderWrapper","marginTop","SearchSettings","setIncludeSubclassSearch","includeSubclassSearch","useState","anchorEl","setAnchorEl","open","Boolean","undefined","IconButton","size","aria-describedby","currentTarget","Popover","onClose","anchorOrigin","vertical","horizontal","transformOrigin","FormControlLabel","checked","control","Checkbox","labelPlacement","wd","WBK","instance","sparqlEndpoint","wc","maxWidth","autocomplete","searchSettingsWrapper","marginRight","Input","setNoResults","setEntityMediaResults","setResultsLoading","loading","setLoading","setValue","inputValue","setInputValue","inputSearchResults","setInputSearchResults","params","useParams","history","useHistory","timer","useRef","useEffect","data","push","searchValues","searchValue","searchLabel","fetch","searchEntities","then","response","json","search","find","d","newEntityMediaResults","sparqlQuery","isMobile","concat","results","bindings","current","clearTimeout","setTimeout","Autocomplete","clearOnBlur","autoHighlight","options","renderOption","getOptionSelected","title","getOptionLabel","filterOptions","x","onInputChange","newInputValue","renderInput","TextField","InputProps","endAdornment","CircularProgress","formatDesc","desc","substr","theme","height","wordBreak","fontSize","media","objectFit","cursor","marginBottom","creatorWrapper","transform","textDecoration","palette","text","secondary","chipsWrapper","flexWrap","MediaBox","thumb","fileLabel","file","encoding","fileOrig","itemLabel","creator","depictLabels","depictIDs","uploadCount","setUploadCount","count","Card","includes","controls","alt","effect","src","CardContent","Children","toArray","filter","map","i","Chip","handleOnClickDepict","to","CardActions","Button","href","minHeight","tab","minWidth","textTransform","icon","MediaTypeTabs","setTab","TABS","Tabs","indicatorColor","textColor","Tab","getFilenameExtension","filename","NoResults","position","top","Loading","DepictsValueTable","depictStats","setDepictStats","depicts","filteredDepicts","forEach","Object","keys","key","TableContainer","component","Paper","Table","aria-label","TableHead","TableRow","TableCell","align","TableBody","entries","sort","a","row","scope","AnalyticsDialog","handleClose","Dialog","fullWidth","fullScreen","DialogTitle","DialogContent","DialogActions","inputWrapper","resultCountWrapper","marginLeft","wrapper","Search","entityMediaResults","noResults","selectedImage","setSelectedImage","setOpen","filteredResults","filterExts","files","extensions","toLowerCase","filterResults","console","log","justifyContent","result","large","username","App","exact","path","User","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","CssBaseline","basename","document","getElementById"],"mappings":"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","file":"static/js/main.9334b766.chunk.js","sourcesContent":["export const TIMEOUT_FOR_SEARCH = 500;\r\nexport const DEFAULT_MEDIA_LIMIT = 1000;\r\nexport const MAX_MEDIA_LIMIT = 1500;\r\nexport const WCQS_ENDPOINT = 'https://wcqs-beta.wmflabs.org/sparql';\r\nexport const WDQS_ENDPOINT = 'https://query.wikidata.org/sparql';\r\nexport const WIKIDATA_URL = 'https://www.wikidata.org';\r\nexport const COMMONS_URL = 'https://commons.wikimedia.org/';\r\nexport const SEPERATOR = ';';\r\nexport const NO_DEPICT_VALUES = 'no depict values';\r\n\r\nexport const ALL_TAB = 0;\r\nexport const IMAGES_TAB = 1;\r\nexport const VIDEO_TAB = 2;\r\nexport const AUDIO_TAB = 3;\r\n\r\nexport const NOT_IMAGE_ENCODINGS = [\r\n  'video/webm',\r\n  'video/mpeg',\r\n  'audio/wav',\r\n  'audio/x-flac',\r\n  'audio/mpeg',\r\n  'audio/midi',\r\n  'audio/webm',\r\n  'application/ogg',\r\n];\r\n\r\nexport const IMAGE_FILE_EXTS = [\r\n  'jpg',\r\n  'jpeg',\r\n  'jpe',\r\n  'jif',\r\n  'jfif',\r\n  'png',\r\n  'gif',\r\n  'webp',\r\n  'tiff',\r\n  'psd',\r\n  'raw',\r\n  'svg',\r\n  'pdf',\r\n];\r\n\r\nexport const VIDEO_FILE_EXTS = [\r\n  'webm',\r\n  'mpg',\r\n  'mpeg',\r\n  'mpe',\r\n  'mpv',\r\n  'ogv',\r\n  'mp4',\r\n  'm4p',\r\n  'm4v',\r\n  'avi',\r\n  'wmv',\r\n  'mov',\r\n  'qt',\r\n  'flv',\r\n];\r\n\r\nexport const AUDIO_FILE_EXTS = [\r\n  'm4a',\r\n  'flac',\r\n  'mp3',\r\n  'wav',\r\n  'wma',\r\n  'aac',\r\n  'ogg',\r\n  'midi',\r\n];\r\n","const getFullsizeImage = (url) => url.split('?width')[0];\r\n\r\nexport default getFullsizeImage;\r\n","import getFullsizeImage from './getFullsizeImage';\r\n\r\nconst getFilenameFromWDCFilePath = (url) => {\r\n  const splitUrl = url.split('/');\r\n\r\n  return getFullsizeImage(splitUrl[splitUrl.length - 1]);\r\n};\r\n\r\nexport default getFilenameFromWDCFilePath;\r\n","import { Box, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst SearchResultOption = ({ onClick, option }) => (\r\n  <Box display=\"flex\" flexDirection=\"column\" onClick={onClick}>\r\n    <Typography>{option.label}</Typography>\r\n    <Typography variant=\"caption\">{option.description}</Typography>\r\n  </Box>\r\n);\r\n\r\nexport default SearchResultOption;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Input from '@material-ui/core/Input';\r\nimport { MAX_MEDIA_LIMIT } from '../consts';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: 250,\r\n  },\r\n  input: {\r\n    width: 50,\r\n  },\r\n});\r\n\r\nconst MediaLimitSlider = ({ mediaLimit, setMediaLimit }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    if (newValue > MAX_MEDIA_LIMIT) return false;\r\n    return setMediaLimit(newValue);\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    if (Number(event.target.value) > MAX_MEDIA_LIMIT) return false;\r\n    return setMediaLimit(event.target.value === '' ? '' : Number(event.target.value));\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography id=\"input-slider\" gutterBottom>\r\n        Media limit\r\n      </Typography>\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs>\r\n          <Slider\r\n            value={typeof mediaLimit === 'number' ? mediaLimit : 0}\r\n            onChange={handleSliderChange}\r\n            aria-labelledby=\"input-slider\"\r\n            color=\"secondary\"\r\n            min={10}\r\n            max={MAX_MEDIA_LIMIT}\r\n            step={10}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <Input\r\n            className={classes.input}\r\n            value={mediaLimit}\r\n            margin=\"dense\"\r\n            onChange={handleInputChange}\r\n            inputProps={{\r\n              step: 10,\r\n              min: 10,\r\n              max: MAX_MEDIA_LIMIT,\r\n              type: 'number',\r\n              'aria-labelledby': 'input-slider',\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLimitSlider;\r\n","import React, { useState } from 'react';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport {\r\n  Checkbox, FormControlLabel, IconButton, makeStyles, Popover,\r\n} from '@material-ui/core';\r\nimport MediaLimitSlider from './MediaLimitSlider';\r\n\r\nconst useStyles = makeStyles({\r\n  popoverContent: {\r\n    padding: '8px 16px',\r\n\r\n    '& .MuiFormControlLabel-labelPlacementStart': {\r\n      margin: 0,\r\n    },\r\n  },\r\n\r\n  sliderWrapper: {\r\n    marginTop: 16,\r\n  },\r\n});\r\n\r\nconst SearchSettings = ({\r\n  setIncludeSubclassSearch,\r\n  includeSubclassSearch,\r\n  setMediaLimit,\r\n  mediaLimit,\r\n}) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setIncludeSubclassSearch(event.target.checked);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'simple-popover' : undefined;\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        size=\"small\"\r\n        aria-describedby={id}\r\n        onClick={handleClick}\r\n      >\r\n        <SettingsIcon />\r\n      </IconButton>\r\n      <Popover\r\n        id={id}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        onClose={handleClose}\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'center',\r\n        }}\r\n        transformOrigin={{\r\n          vertical: 'top',\r\n          horizontal: 'center',\r\n        }}\r\n      >\r\n        <div className={classes.popoverContent}>\r\n          <FormControlLabel\r\n            value=\"start\"\r\n            checked={includeSubclassSearch}\r\n            onChange={handleChange}\r\n            control={<Checkbox size=\"small\" />}\r\n            label=\"Include subclass search\"\r\n            labelPlacement=\"start\"\r\n          />\r\n\r\n          <div className={classes.sliderWrapper}>\r\n            <MediaLimitSlider\r\n              setMediaLimit={setMediaLimit}\r\n              mediaLimit={mediaLimit}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Popover>\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default SearchSettings;\r\n","import React, {\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n} from 'react';\r\nimport WBK from 'wikibase-sdk';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport {\r\n  CircularProgress, makeStyles,\r\n} from '@material-ui/core';\r\nimport { isMobile } from 'react-device-detect';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport SearchResultOption from './SearchResultOption';\r\nimport {\r\n  COMMONS_URL,\r\n  DEFAULT_MEDIA_LIMIT,\r\n  SEPERATOR,\r\n  TIMEOUT_FOR_SEARCH,\r\n  WCQS_ENDPOINT,\r\n  WDQS_ENDPOINT,\r\n  WIKIDATA_URL,\r\n} from '../consts';\r\nimport SearchSettings from './SearchSettings';\r\n\r\nconst wd = WBK({\r\n  instance: WIKIDATA_URL,\r\n  sparqlEndpoint: WDQS_ENDPOINT,\r\n});\r\n\r\nexport const wc = WBK({\r\n  instance: COMMONS_URL,\r\n  sparqlEndpoint: WCQS_ENDPOINT,\r\n});\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    maxWidth: 500,\r\n    width: '100%',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  autocomplete: {\r\n    width: '100%',\r\n  },\r\n\r\n  searchSettingsWrapper: {\r\n    marginRight: 8,\r\n  },\r\n});\r\n\r\nconst Input = ({\r\n  setNoResults = () => {},\r\n  setEntityMediaResults = () => {},\r\n  setResultsLoading = () => {},\r\n}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [value, setValue] = useState(null);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [inputSearchResults, setInputSearchResults] = useState([]);\r\n\r\n  // settings\r\n  const [includeSubclassSearch, setIncludeSubclassSearch] = useState(true);\r\n  const [mediaLimit, setMediaLimit] = useState(DEFAULT_MEDIA_LIMIT);\r\n\r\n  const params = useParams();\r\n  const history = useHistory();\r\n\r\n  const timer = useRef(null);\r\n\r\n  const classes = useStyles();\r\n\r\n  const handleOnValueChange = (event, newValue) => {\r\n    setValue(newValue);\r\n    if (newValue?.id) history.push(`/search/${newValue.id}${SEPERATOR}${newValue.label}`);\r\n  };\r\n\r\n  // useEffect for Commons search\r\n  useEffect(() => {\r\n    // e.g. /search/Q147;kitten\r\n    if (!params?.data) {\r\n      if (value) {\r\n        history.push(`/search/${value.id}${SEPERATOR}${value.label}`);\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const searchValues = params.data.split(SEPERATOR);\r\n\r\n    const searchValue = searchValues[0];\r\n    const searchLabel = searchValues[1];\r\n\r\n    if (!searchValue || !searchLabel) return false;\r\n\r\n    // if value comes from url change, sync input value\r\n    if (searchLabel !== inputValue) {\r\n      fetch(wd.searchEntities(searchLabel))\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setInputSearchResults(data.search);\r\n          setValue(data.search.find((d) => d.id === searchValue));\r\n        });\r\n    }\r\n\r\n    setEntityMediaResults([]);\r\n    setResultsLoading(true);\r\n    let newEntityMediaResults = [];\r\n    let url;\r\n\r\n    // define first query\r\n    let sparqlQuery = `\r\n      SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding ?creator (GROUP_CONCAT(?depictID; separator = '${SEPERATOR}') AS ?depictIDs) (GROUP_CONCAT(?depictLabel; separator = '${SEPERATOR}') AS ?depictLabels)\r\n      WITH {  \r\n          SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding ?creator WHERE {\r\n            ?file wdt:P180 wd:${searchValue} .\r\n            ?file schema:contentUrl ?url .\r\n            ?file schema:encodingFormat ?encoding .\r\n            \r\n            OPTIONAL { ?file p:P170/pq:P4174 ?creator . }\r\n      \r\n            SERVICE wikibase:label {\r\n              bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".\r\n              ?file rdfs:label ?fileLabel.\r\n            }\r\n      \r\n            bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)), \"?width=${isMobile ? 100 : 200}\")) AS ?thumb)\r\n            bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\r\n          } limit ${mediaLimit}\r\n      } as %files\r\n      \r\n      WITH {\r\n        SELECT ?file ?depict WHERE {\r\n          INCLUDE %files .\r\n          ?file wdt:P180 ?depict .\r\n        }\r\n      } AS %file_depicts\r\n      \r\n      WITH {\r\n        SELECT ?file ?depict WHERE {\r\n          INCLUDE %file_depicts .\r\n        }\r\n      } AS %top_file_depicts\r\n      \r\n      WITH {\r\n        SELECT DISTINCT ?depict WHERE {\r\n          INCLUDE %file_depicts .\r\n        }\r\n      } AS %distinct_depicts\r\n        \r\n      WITH {\r\n        SELECT ?depict ?depictLabel ?depictID WHERE {\r\n          INCLUDE %distinct_depicts .\r\n\r\n          BIND(?depict as ?depictURL) .\r\n          service wikibase:label {\r\n            bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" .\r\n            ?depictURL rdfs:label ?depictID .\r\n          }\r\n\r\n          service <https://query.wikidata.org/sparql> {\r\n            service wikibase:label {\r\n              bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".\r\n              ?depict rdfs:label ?depictLabel.\r\n            }\r\n          }\r\n        }\r\n      } AS %depictLabels\r\n      \r\n      WHERE {\r\n        INCLUDE %files .\r\n        INCLUDE %top_file_depicts .\r\n        INCLUDE %depictLabels .\r\n      } GROUP BY ?file ?fileLabel ?thumb ?fileOrig ?encoding ?creator\r\n    `;\r\n\r\n    url = wc.sparqlQuery(sparqlQuery);\r\n\r\n    fetch(url).then((response) => response.json()).then((data) => {\r\n      newEntityMediaResults = newEntityMediaResults.concat(data.results.bindings);\r\n      setNoResults(false);\r\n\r\n      setEntityMediaResults([...newEntityMediaResults]);\r\n\r\n      if (!includeSubclassSearch) {\r\n        if (newEntityMediaResults.length === 0) setNoResults(true);\r\n        setResultsLoading(false);\r\n        return true;\r\n      }\r\n\r\n      if (newEntityMediaResults.length > 0) setResultsLoading(false);\r\n      // TODO: DUPLICATESSSS HERE IN DEPICTS???\r\n      // define query that searches for subclasses as well\r\n      sparqlQuery = `\r\n        SELECT DISTINCT ?item ?itemLabel ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator (GROUP_CONCAT(?depictID; separator = '${SEPERATOR}') AS ?depictIDs) (GROUP_CONCAT(?depictLabel; separator = '${SEPERATOR}') AS ?depictLabels) WITH { \r\n          SELECT ?item ?itemLabel WHERE {\r\n            SERVICE <https://query.wikidata.org/sparql> {\r\n              ?item wdt:P31/wdt:P279* wd:${searchValue} .\r\n              SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". ?item rdfs:label ?itemLabel . }\r\n            }\r\n          } limit ${mediaLimit}\r\n        } AS %Wikidataitems\r\n  \r\n        WITH {\r\n          SELECT ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator {\r\n            INCLUDE %Wikidataitems .\r\n            ?file wdt:P180 ?item.\r\n            ?file schema:contentUrl ?url .\r\n            ?file schema:encodingFormat ?encoding .\r\n  \r\n            OPTIONAL {\r\n              ?file p:P170/pq:P4174 ?creator .\r\n            }\r\n  \r\n            SERVICE wikibase:label {\r\n              bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".\r\n              ?file rdfs:label ?fileLabel.\r\n            }\r\n\r\n            bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)), \"?width=${isMobile ? 100 : 200}\")) AS ?thumb)\r\n            bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\r\n          }\r\n        } AS %files\r\n\r\n        WITH {\r\n          SELECT ?file ?depict WHERE {\r\n            INCLUDE %files .\r\n            ?file wdt:P180 ?depict .\r\n          }\r\n        } AS %file_depicts\r\n        \r\n        WITH {\r\n          SELECT ?file ?depict WHERE {\r\n            INCLUDE %file_depicts .\r\n          }\r\n        } AS %top_file_depicts\r\n        \r\n        WITH {\r\n          SELECT DISTINCT ?depict WHERE {\r\n            INCLUDE %file_depicts .\r\n          }\r\n        } AS %distinct_depicts\r\n          \r\n        WITH {\r\n          SELECT ?depict ?depictLabel ?depictID WHERE {\r\n            INCLUDE %distinct_depicts .\r\n\r\n            BIND(?depict as ?depictURL) .\r\n            service wikibase:label {\r\n              bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" .\r\n              ?depictURL rdfs:label ?depictID .\r\n            }\r\n\r\n            service <https://query.wikidata.org/sparql> {\r\n              service wikibase:label {\r\n                bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" .\r\n                ?depict rdfs:label ?depictLabel .\r\n              }\r\n            }\r\n          }\r\n        } AS %depictLabels\r\n\r\n        WHERE {\r\n          INCLUDE %files .\r\n          INCLUDE %top_file_depicts .\r\n          INCLUDE %depictLabels .\r\n        } GROUP BY ?item ?itemLabel ?file ?thumb ?fileOrig ?fileLabel ?encoding ?creator\r\n      `;\r\n\r\n      url = wc.sparqlQuery(sparqlQuery);\r\n      // eslint-disable-next-line no-shadow\r\n      fetch(url).then((response) => response.json()).then((data) => {\r\n        newEntityMediaResults = newEntityMediaResults.concat(data.results.bindings);\r\n        setEntityMediaResults([...newEntityMediaResults]);\r\n        if (newEntityMediaResults.length === 0) setNoResults(true);\r\n        setResultsLoading(false);\r\n      });\r\n\r\n      return true;\r\n    });\r\n\r\n    return true;\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [includeSubclassSearch, params]);\r\n\r\n  // useEffect for input change and Wikidata search\r\n  useEffect(() => {\r\n    if (inputValue === '') {\r\n      setNoResults(false);\r\n      return undefined;\r\n    }\r\n\r\n    if (timer.current) {\r\n      clearTimeout(timer.current);\r\n    }\r\n\r\n    timer.current = setTimeout(() => {\r\n      setLoading(true);\r\n      const url = wd.searchEntities(inputValue);\r\n      fetch(url)\r\n        .then((response) => response.json())\r\n        .then((data) => {\r\n          setInputSearchResults(data.search);\r\n          setLoading(false);\r\n        });\r\n    }, TIMEOUT_FOR_SEARCH);\r\n\r\n    return true;\r\n  }, [inputValue, setNoResults]);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div className={classes.searchSettingsWrapper}>\r\n        <SearchSettings\r\n          setIncludeSubclassSearch={setIncludeSubclassSearch}\r\n          includeSubclassSearch={includeSubclassSearch}\r\n          setMediaLimit={setMediaLimit}\r\n          mediaLimit={mediaLimit}\r\n        />\r\n      </div>\r\n\r\n      <Autocomplete\r\n        clearOnBlur={false}\r\n        autoHighlight\r\n        options={inputSearchResults}\r\n        renderOption={(option) => <SearchResultOption option={option} />}\r\n        // eslint-disable-next-line no-shadow\r\n        getOptionSelected={(option, value) => option.title === value.title}\r\n        getOptionLabel={(option) => option.label}\r\n        loading={loading}\r\n        filterOptions={(x) => x}\r\n        value={value}\r\n        size=\"small\"\r\n        onChange={handleOnValueChange}\r\n        onInputChange={(event, newInputValue) => {\r\n          setInputValue(newInputValue);\r\n        }}\r\n        className={classes.autocomplete}\r\n        // eslint-disable-next-line no-shadow\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            label=\"Search Commons...\"\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n              ...params.InputProps,\r\n              endAdornment: (\r\n                <>\r\n                  {loading ? <CircularProgress color=\"inherit\" size={20} /> : null}\r\n                  {inputSearchResults.length > 0 ? params.InputProps.endAdornment : null}\r\n                </>\r\n              ),\r\n            }}\r\n          />\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import React, { Children, useEffect, useState } from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Chip, makeStyles } from '@material-ui/core';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport 'react-lazy-load-image-component/src/effects/blur.css';\r\nimport { isMobile } from 'react-device-detect';\r\nimport ReactPlayer from 'react-player';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport { useHistory } from 'react-router';\r\nimport { Link } from 'react-router-dom';\r\nimport { NOT_IMAGE_ENCODINGS, NO_DEPICT_VALUES, SEPERATOR } from '../consts';\r\nimport getFilenameFromWDCFilePath from '../utils/getFilenameFromWDCFilePath';\r\nimport { wc } from './Input';\r\n\r\nconst formatTitle = (title) => {\r\n  if (title.length > 50) return `${title.substr(0, 50)}...`;\r\n  return title;\r\n};\r\n\r\nconst formatDesc = (desc) => {\r\n  if (desc.length > 150) return `${desc.substr(0, 50)}...`;\r\n  return desc;\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: 'fit-content',\r\n    margin: isMobile ? 8 : 16,\r\n    width: isMobile ? 125 : 225,\r\n\r\n    '& .MuiCardContent-root': {\r\n      padding: 8,\r\n    },\r\n\r\n    '& .MuiCardActions-root': {\r\n      padding: 4,\r\n    },\r\n  },\r\n\r\n  title: {\r\n    wordBreak: 'break-all',\r\n    fontSize: isMobile ? 12 : 14,\r\n  },\r\n\r\n  media: {\r\n    '& img': {\r\n      objectFit: 'cover !important',\r\n    },\r\n\r\n    '& img:hover': {\r\n      cursor: 'zoom-in !important',\r\n    },\r\n  },\r\n\r\n  desc: {\r\n    fontSize: isMobile ? 10 : 12,\r\n    marginBottom: 4,\r\n  },\r\n\r\n  creatorWrapper: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n\r\n    '& svg': {\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      fontSize: 20,\r\n      color: 'gray',\r\n      transform: 'translateY(-2px)',\r\n      marginRight: 4,\r\n    },\r\n\r\n    '& a': {\r\n      fontSize: 12,\r\n      textDecoration: 'none',\r\n      color: theme.palette.text.secondary,\r\n\r\n      '&:hover': {\r\n        textDecoration: 'underline',\r\n      },\r\n    },\r\n  },\r\n\r\n  chipsWrapper: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    margin: '8px 0',\r\n\r\n    '& > div': {\r\n      margin: 2,\r\n      height: isMobile ? 16 : 20,\r\n    },\r\n\r\n    '& span': {\r\n      fontSize: isMobile ? 10 : 11,\r\n    },\r\n  },\r\n}));\r\n\r\nconst MediaBox = ({\r\n  data: {\r\n    thumb,\r\n    fileLabel,\r\n    file,\r\n    encoding,\r\n    fileOrig,\r\n    itemLabel,\r\n    creator,\r\n    depictLabels,\r\n    depictIDs,\r\n  },\r\n  onClick = () => {},\r\n}) => {\r\n  const [uploadCount, setUploadCount] = useState(0);\r\n\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n\r\n  const handleOnClickDepict = (label, i) => {\r\n    history.push(`/search/${depictIDs.value.split(SEPERATOR)[i]}${SEPERATOR}${label}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!creator) return false;\r\n\r\n    const sparqlQuery = `\r\n      SELECT (COUNT(?file) as ?count) WHERE {\r\n        BIND(\"${creator.value}\" AS ?username) .\r\n        ?file (p:P170/pq:P4174) ?username;\r\n      }\r\n      LIMIT 99\r\n    `;\r\n\r\n    fetch(wc.sparqlQuery(sparqlQuery)).then((response) => response.json()).then((data) => {\r\n      if (data.results.bindings?.length) setUploadCount(data.results.bindings[0].count.value);\r\n    });\r\n\r\n    return true;\r\n  }, [creator]);\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <div className={classes.media}>\r\n        {NOT_IMAGE_ENCODINGS.includes(encoding.value) ? (\r\n          <ReactPlayer\r\n            controls\r\n            url={fileOrig.value}\r\n            height={isMobile ? 94 : 169}\r\n            width={isMobile ? 125 : 225}\r\n          />\r\n        ) : (\r\n          <LazyLoadImage\r\n            onClick={onClick}\r\n            alt={file.value}\r\n            effect=\"blur\"\r\n            src={thumb.value}\r\n            height={isMobile ? 94 : 169}\r\n            width={isMobile ? 125 : 225}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <CardContent>\r\n        <Typography className={classes.title} gutterBottom>\r\n          {formatTitle(getFilenameFromWDCFilePath(fileOrig.value))}\r\n        </Typography>\r\n\r\n        {fileLabel?.['xml:lang'] ? (\r\n          <Typography\r\n            color=\"textSecondary\"\r\n            className={classes.desc}\r\n          >\r\n            {formatDesc(fileLabel.value)}\r\n          </Typography>\r\n        )\r\n          // show Wikidata item description if file description unavailable\r\n          : itemLabel?.value && (\r\n            <Typography color=\"textSecondary\" className={classes.desc}>\r\n              {formatDesc(itemLabel.value)}\r\n            </Typography>\r\n          )}\r\n\r\n        {depictLabels?.value && (\r\n          <div className={classes.chipsWrapper}>\r\n            {Children.toArray((\r\n              depictLabels.value.split(SEPERATOR).filter((d) => d !== NO_DEPICT_VALUES)\r\n            ).map((label, i) => (\r\n              <Chip\r\n                size=\"small\"\r\n                label={label}\r\n                onClick={() => handleOnClickDepict(label, i)}\r\n              />\r\n            )))}\r\n          </div>\r\n        )}\r\n\r\n        {creator && (\r\n          <div className={classes.creatorWrapper}>\r\n            <PersonIcon />\r\n            <Link to={`/user/${creator.value}`}>\r\n              {`${creator.value} (${uploadCount || '?'})`}\r\n            </Link>\r\n          </div>\r\n        )}\r\n      </CardContent>\r\n\r\n      <CardActions>\r\n        <Button\r\n          size=\"small\"\r\n          color=\"primary\"\r\n          href={file.value}\r\n          target=\"_blank\"\r\n        >\r\n          Learn More\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MediaBox;\r\n","import React from 'react';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport AudiotrackIcon from '@material-ui/icons/Audiotrack';\r\nimport VideocamOutlinedIcon from '@material-ui/icons/VideocamOutlined';\r\nimport ImageOutlinedIcon from '@material-ui/icons/ImageOutlined';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    minHeight: 36,\r\n  },\r\n\r\n  tab: {\r\n    padding: 0,\r\n    minHeight: 32,\r\n    minWidth: 85,\r\n    fontSize: 12,\r\n    textTransform: 'capitalize',\r\n\r\n    '& .MuiTab-wrapper': {\r\n      flexDirection: 'row',\r\n\r\n      '& .MuiSvgIcon-root': {\r\n        margin: '0 4px 0 0',\r\n      },\r\n    },\r\n  },\r\n\r\n  icon: {\r\n    fontSize: 20,\r\n  },\r\n});\r\n\r\nconst MediaTypeTabs = ({ setTab, tab }) => {\r\n  const classes = useStyles();\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setTab(newValue);\r\n  };\r\n\r\n  const TABS = [\r\n    {\r\n      label: 'All',\r\n      icon: <SearchOutlinedIcon className={classes.icon} />,\r\n    },\r\n    {\r\n      label: 'Images',\r\n      icon: <ImageOutlinedIcon className={classes.icon} />,\r\n    },\r\n    {\r\n      label: 'Video',\r\n      icon: <VideocamOutlinedIcon className={classes.icon} />,\r\n    },\r\n    {\r\n      label: 'Audio',\r\n      icon: <AudiotrackIcon className={classes.icon} />,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Tabs\r\n      value={tab}\r\n      indicatorColor=\"primary\"\r\n      textColor=\"primary\"\r\n      onChange={handleChange}\r\n      className={classes.root}\r\n    >\r\n      {TABS.map(({ label, icon }) => (\r\n        <Tab key={label} className={classes.tab} label={label} icon={icon} />\r\n      ))}\r\n    </Tabs>\r\n  );\r\n};\r\n\r\nexport default MediaTypeTabs;\r\n","const getFilenameExtension = (filename) => {\r\n  const splitUrl = filename.split('.');\r\n\r\n  return splitUrl[splitUrl.length - 1];\r\n};\r\n\r\nexport default getFilenameExtension;\r\n","import { Typography } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst NoResults = () => (\r\n  <Typography>No results...</Typography>\r\n);\r\n\r\nexport default NoResults;\r\n","import { CircularProgress, makeStyles } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n  },\r\n});\r\n\r\nconst Loading = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <CircularProgress />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport { NO_DEPICT_VALUES, SEPERATOR } from '../consts';\r\n\r\nconst DepictsValueTable = ({ data }) => {\r\n  const [depictStats, setDepictStats] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const depicts = {};\r\n    const filteredDepicts = {};\r\n\r\n    // collect depict count\r\n    data.forEach((d) => {\r\n      const labels = d.depictLabels.value.split(SEPERATOR);\r\n\r\n      labels.forEach((label) => {\r\n        if (depicts[label]) {\r\n          depicts[label] += 1;\r\n        } else {\r\n          depicts[label] = 1;\r\n        }\r\n      });\r\n    });\r\n\r\n    // remove depicts that are mentioned just once\r\n    Object.keys(depicts).forEach((key) => {\r\n      if (depicts[key] > 1 && key !== NO_DEPICT_VALUES) {\r\n        filteredDepicts[key] = depicts[key];\r\n      }\r\n    });\r\n\r\n    setDepictStats(filteredDepicts);\r\n  }, [data]);\r\n\r\n  if (!depictStats) return null;\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table aria-label=\"a dense table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell><b>Depicts label</b></TableCell>\r\n            <TableCell align=\"right\"><b>Occurrences</b></TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {Object.entries(depictStats).sort(([, a], [, b]) => b - a).map((row) => (\r\n            <TableRow>\r\n              <TableCell component=\"th\" scope=\"row\">{row[0]}</TableCell>\r\n              <TableCell align=\"right\">{row[1]}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default DepictsValueTable;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { isMobile } from 'react-device-detect';\r\nimport DepictsValueTable from './DepictsValueTable';\r\n\r\nconst AnalyticsDialog = ({ open, handleClose, data }) => (\r\n  <Dialog\r\n    fullWidth\r\n    maxWidth=\"sm\"\r\n    open={open}\r\n    onClose={handleClose}\r\n    fullScreen={isMobile}\r\n  >\r\n    <DialogTitle id=\"max-width-dialog-title\">Depicts value statistics</DialogTitle>\r\n    <DialogContent>\r\n      {/* <DialogContentText>\r\n          You can set my maximum width and whether to adapt or not.\r\n        </DialogContentText> */}\r\n      <DepictsValueTable data={data} />\r\n    </DialogContent>\r\n    <DialogActions>\r\n      <Button onClick={handleClose} color=\"primary\">\r\n        Close\r\n      </Button>\r\n    </DialogActions>\r\n  </Dialog>\r\n);\r\n\r\nexport default AnalyticsDialog;\r\n","import React, { Children, useState } from 'react';\r\nimport { Box, IconButton, makeStyles } from '@material-ui/core';\r\nimport { Lightbox } from 'react-modal-image';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport MediaBox from './MediaBox';\r\nimport Input from './Input';\r\nimport MediaTypeTabs from './MediaTypeTabs';\r\nimport {\r\n  ALL_TAB, AUDIO_FILE_EXTS, AUDIO_TAB, IMAGES_TAB, IMAGE_FILE_EXTS, VIDEO_FILE_EXTS, VIDEO_TAB,\r\n} from '../consts';\r\nimport getFilenameExtension from '../utils/getFilenameExtension';\r\nimport getFilenameFromWDCFilePath from '../utils/getFilenameFromWDCFilePath';\r\nimport NoResults from './NoResults';\r\nimport Loading from './Loading';\r\nimport AnalyticsDialog from './AnalyticsDialog';\r\n\r\nconst useStyles = makeStyles({\r\n  inputWrapper: {\r\n    marginBottom: 8,\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  resultCountWrapper: {\r\n    marginTop: 12,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n\r\n    '& button': {\r\n      transform: 'translateY(-2px)',\r\n      marginLeft: 2,\r\n    },\r\n  },\r\n\r\n  wrapper: {\r\n    marginTop: 12,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nconst Search = () => {\r\n  const classes = useStyles();\r\n  const [entityMediaResults, setEntityMediaResults] = useState([]);\r\n  const [noResults, setNoResults] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tab, setTab] = useState(ALL_TAB);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const closeLightbox = () => {\r\n    setSelectedImage(false);\r\n  };\r\n\r\n  const filterResults = () => {\r\n    const filterExts = (files, extensions) => files.filter((media) => (\r\n      extensions.includes(\r\n        getFilenameExtension(getFilenameFromWDCFilePath(media.fileOrig.value)),\r\n      )\r\n      || extensions.includes(\r\n        getFilenameExtension(getFilenameFromWDCFilePath(media.fileOrig.value.toLowerCase())),\r\n      )\r\n    ));\r\n\r\n    switch (tab) {\r\n      case IMAGES_TAB:\r\n        return filterExts(entityMediaResults, IMAGE_FILE_EXTS);\r\n      case VIDEO_TAB:\r\n        return filterExts(entityMediaResults, VIDEO_FILE_EXTS);\r\n      case AUDIO_TAB:\r\n        return filterExts(entityMediaResults, AUDIO_FILE_EXTS);\r\n      default:\r\n        return entityMediaResults;\r\n    }\r\n  };\r\n\r\n  const filteredResults = filterResults();\r\n\r\n  console.log(entityMediaResults, 'entityMediaResults');\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.inputWrapper}>\r\n        <Input\r\n          setNoResults={setNoResults}\r\n          setEntityMediaResults={setEntityMediaResults}\r\n          setResultsLoading={setLoading}\r\n        />\r\n        {entityMediaResults.length > 0 && (\r\n          <div className={classes.wrapper}>\r\n            <MediaTypeTabs setTab={setTab} tab={tab} />\r\n            <div className={classes.resultCountWrapper}>\r\n              <small>{`${filteredResults.length} results`}</small>\r\n              <IconButton size=\"small\" onClick={() => setOpen(true)}>\r\n                <BarChartIcon />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {loading && <Loading />}\r\n\r\n      {filteredResults.length > 0 && (\r\n        <Box display=\"flex\" flexWrap=\"wrap\" justifyContent=\"center\">\r\n          {Children.toArray(filteredResults.map((result) => (\r\n            <MediaBox data={result} onClick={() => setSelectedImage(result)} />\r\n          )))}\r\n        </Box>\r\n      )}\r\n\r\n      {noResults && <NoResults />}\r\n\r\n      {selectedImage && (\r\n        <Lightbox\r\n          large={selectedImage.fileOrig.value}\r\n          alt={selectedImage.file.value}\r\n          onClose={closeLightbox}\r\n        />\r\n      )}\r\n\r\n      <AnalyticsDialog\r\n        open={open}\r\n        handleClose={() => setOpen(false)}\r\n        data={entityMediaResults}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React, { Children, useState, useEffect } from 'react';\r\nimport {\r\n  Box, makeStyles, Typography, IconButton,\r\n} from '@material-ui/core';\r\nimport { Lightbox } from 'react-modal-image';\r\nimport { useParams } from 'react-router';\r\nimport { isMobile } from 'react-device-detect';\r\nimport BarChartIcon from '@material-ui/icons/BarChart';\r\nimport MediaBox from './MediaBox';\r\nimport Input, { wc } from './Input';\r\nimport MediaTypeTabs from './MediaTypeTabs';\r\nimport {\r\n  ALL_TAB,\r\n  AUDIO_FILE_EXTS,\r\n  AUDIO_TAB,\r\n  IMAGES_TAB,\r\n  IMAGE_FILE_EXTS,\r\n  NO_DEPICT_VALUES,\r\n  VIDEO_FILE_EXTS,\r\n  VIDEO_TAB,\r\n} from '../consts';\r\nimport getFilenameExtension from '../utils/getFilenameExtension';\r\nimport getFilenameFromWDCFilePath from '../utils/getFilenameFromWDCFilePath';\r\nimport NoResults from './NoResults';\r\nimport Loading from './Loading';\r\nimport AnalyticsDialog from './AnalyticsDialog';\r\n\r\nconst useStyles = makeStyles({\r\n  inputWrapper: {\r\n    marginBottom: 8,\r\n    width: '100%',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  count: {\r\n    marginTop: 4,\r\n  },\r\n\r\n  wrapper: {\r\n    marginTop: 12,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n\r\n  username: {\r\n    marginTop: 12,\r\n  },\r\n\r\n  resultCountWrapper: {\r\n    marginTop: 12,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n\r\n    '& button': {\r\n      transform: 'translateY(-2px)',\r\n      marginLeft: 2,\r\n    },\r\n  },\r\n});\r\n\r\nconst Search = () => {\r\n  const classes = useStyles();\r\n  const [entityMediaResults, setEntityMediaResults] = useState([]);\r\n  const [noResults, setNoResults] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [tab, setTab] = useState(ALL_TAB);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const params = useParams();\r\n\r\n  const closeLightbox = () => {\r\n    setSelectedImage(false);\r\n  };\r\n\r\n  const filterResults = () => {\r\n    const filterExts = (files, extensions) => files.filter((media) => (\r\n      extensions.includes(\r\n        getFilenameExtension(getFilenameFromWDCFilePath(media.fileOrig.value)),\r\n      )\r\n      || extensions.includes(\r\n        getFilenameExtension(getFilenameFromWDCFilePath(media.fileOrig.value.toLowerCase())),\r\n      )\r\n    ));\r\n\r\n    switch (tab) {\r\n      case IMAGES_TAB:\r\n        return filterExts(entityMediaResults, IMAGE_FILE_EXTS);\r\n      case VIDEO_TAB:\r\n        return filterExts(entityMediaResults, VIDEO_FILE_EXTS);\r\n      case AUDIO_TAB:\r\n        return filterExts(entityMediaResults, AUDIO_FILE_EXTS);\r\n      default:\r\n        return entityMediaResults;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!params?.data) return false;\r\n\r\n    setLoading(true);\r\n    setNoResults(false);\r\n\r\n    const sparqlQuery = `\r\n      SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding (GROUP_CONCAT(?depictID; separator = ';') AS ?depictIDs) (GROUP_CONCAT(?depictLabel; separator = ';') AS ?depictLabels)\r\n      WITH {\r\n        SELECT ?file ?fileLabel ?thumb ?fileOrig ?encoding WHERE {\r\n          BIND('${params?.data}' AS ?username) .\r\n          ?file (p:P170/pq:P4174) ?username.\r\n          \r\n          ?file schema:contentUrl ?url .\r\n          ?file schema:encodingFormat ?encoding .\r\n\r\n          SERVICE wikibase:label {\r\n            bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".\r\n            ?file rdfs:label ?fileLabel.\r\n          }\r\n    \r\n          bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)), \"?width=${isMobile ? 100 : 200}\")) AS ?thumb)\r\n          bind(iri(concat(\"http://commons.wikimedia.org/wiki/Special:FilePath/\", wikibase:decodeUri(substr(str(?url),53)))) AS ?fileOrig)\r\n        } LIMIT 1000\r\n      } as %files\r\n      \r\n      WITH {\r\n        SELECT ?file ?depict WHERE {\r\n          INCLUDE %files .\r\n          OPTIONAL { ?file wdt:P180 ?depict . }\r\n          BIND(IF(BOUND(?depict), ?depict, \"${NO_DEPICT_VALUES}\") AS ?depict).\r\n        }\r\n      } AS %file_depicts\r\n      \r\n      WITH {\r\n        SELECT ?file ?depict WHERE {\r\n          INCLUDE %file_depicts .\r\n        }\r\n      } AS %top_file_depicts\r\n      \r\n      WITH {\r\n        SELECT DISTINCT ?depict WHERE {\r\n          INCLUDE %file_depicts .\r\n        }\r\n      } AS %distinct_depicts\r\n      \r\n      WITH {\r\n        SELECT ?depict ?depictLabel ?depictID WHERE {\r\n          INCLUDE %distinct_depicts .\r\n\r\n          BIND(?depict as ?depictURL) .\r\n          service wikibase:label {\r\n            bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" .\r\n            ?depictURL rdfs:label ?depictID .\r\n          }\r\n\r\n          service <https://query.wikidata.org/sparql> {\r\n            service wikibase:label {\r\n              bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".\r\n              ?depict rdfs:label ?depictLabel.\r\n            }\r\n          }\r\n        }\r\n      } AS %depictLabels\r\n      \r\n      WHERE {\r\n        INCLUDE %files .\r\n        INCLUDE %top_file_depicts .\r\n        INCLUDE %depictLabels .\r\n      } GROUP BY ?file ?fileLabel ?thumb ?fileOrig ?encoding\r\n    `;\r\n\r\n    fetch(wc.sparqlQuery(sparqlQuery)).then((response) => response.json()).then((data) => {\r\n      if (data.results.bindings?.length) {\r\n        setEntityMediaResults(data.results.bindings);\r\n      } else {\r\n        setNoResults(true);\r\n      }\r\n\r\n      setLoading(false);\r\n    });\r\n\r\n    return true;\r\n  }, [params]);\r\n\r\n  const filteredResults = filterResults();\r\n\r\n  console.log(entityMediaResults, 'entityMediaResults');\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.inputWrapper}>\r\n        <Input />\r\n        {entityMediaResults.length > 0 && (\r\n          <div className={classes.wrapper}>\r\n            <MediaTypeTabs setTab={setTab} tab={tab} />\r\n            <Typography variant=\"h6\" className={classes.username}>{`User:${params.data} uploads`}</Typography>\r\n            <div className={classes.resultCountWrapper}>\r\n              <small>{`${filteredResults.length} results`}</small>\r\n              <IconButton size=\"small\" onClick={() => setOpen(true)}>\r\n                <BarChartIcon />\r\n              </IconButton>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {loading && <Loading />}\r\n\r\n      {filteredResults.length > 0 && (\r\n        <Box display=\"flex\" flexWrap=\"wrap\" justifyContent=\"center\">\r\n          {Children.toArray(filteredResults.map((result) => (\r\n            <MediaBox data={result} onClick={() => setSelectedImage(result)} />\r\n          )))}\r\n        </Box>\r\n      )}\r\n\r\n      {noResults && <NoResults />}\r\n\r\n      {selectedImage && (\r\n        <Lightbox\r\n          large={selectedImage.fileOrig.value}\r\n          alt={selectedImage.file.value}\r\n          onClose={closeLightbox}\r\n        />\r\n      )}\r\n\r\n      <AnalyticsDialog\r\n        open={open}\r\n        handleClose={() => setOpen(false)}\r\n        data={entityMediaResults}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core';\r\nimport { isMobile } from 'react-device-detect';\r\nimport { Redirect, Route, Switch } from 'react-router';\r\nimport Search from './components/Search';\r\nimport User from './components/User';\r\nimport Input from './components/Input';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    padding: isMobile ? '20px 10px' : '25px 50px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n});\r\n\r\nconst App = () => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Input} />\r\n        <Route path=\"/search/:data\" component={Search} />\r\n        <Route path=\"/user/:data\" component={User} />\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { CssBaseline } from '@material-ui/core';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <CssBaseline />\r\n    <Router basename=\"/wikimedia-commons-search\">\r\n      <App />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}